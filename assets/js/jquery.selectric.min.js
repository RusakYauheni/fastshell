/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2019. MIT licensed.
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,s){return void 0===s&&(s="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(s),s}:e(jQuery)}(function(e){"use strict";var t=e(document),s=e(window),i="selectric",l="Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel",n=".sl",a=["a","e","i","o","u","n","c","y"],o=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],r=function(t,s){var i=this;i.element=t,i.$element=e(t),i.state={multiple:!!i.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},i.eventTriggers={open:i.open,close:i.close,destroy:i.destroy,refresh:i.refresh,init:i.init},i.init(s)};r.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=o.length;t--;)e=e.toLowerCase().replace(o[t],a[t]);return e},format:function(e){var t=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,s,i){return i&&t[1]?t[1][i]:t[s]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(t,s){var l=s.element,n=s.options["on"+t],a=[l].concat([].slice.call(arguments).slice(1));e.isFunction(n)&&n.apply(l,a),e(l).trigger(i+"-"+this.toDash(t),a)},arrayToClassname:function(t){var s=e.grep(t,function(e){return!!e});return e.trim(s.join(" "))}},init:function(t){var s=this;if(s.options=e.extend(!0,{},e.fn[i].defaults,s.options,t),s.utils.triggerCallback("BeforeInit",s),s.destroy(!0),s.options.disableOnMobile&&s.utils.isMobile())return void(s.disableOnMobile=!0);s.classes=s.getClassNames();var l=e("<input/>",{"class":s.classes.input,readonly:s.utils.isMobile()}),n=e("<div/>",{"class":s.classes.items,tabindex:-1}),a=e("<div/>",{"class":s.classes.scroll}),o=e("<div/>",{"class":s.classes.prefix,html:s.options.arrowButtonMarkup}),r=e("<span/>",{"class":"label"}),u=s.$element.wrap("<div/>").parent().append(o.prepend(r),n,l),p=e("<div/>",{"class":s.classes.hideselect});s.elements={input:l,items:n,itemsScroll:a,wrapper:o,label:r,outerWrapper:u},s.options.nativeOnMobile&&s.utils.isMobile()&&(s.elements.input=void 0,p.addClass(s.classes.prefix+"-is-native"),s.$element.on("change",function(){s.refresh()})),s.$element.on(s.eventTriggers).wrap(p),s.originalTabindex=s.$element.prop("tabindex"),s.$element.prop("tabindex",-1),s.populate(),s.activate(),s.utils.triggerCallback("Init",s)},activate:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),s=e.$element.width();t.removeClass(e.classes.tempshow),e.utils.triggerCallback("BeforeActivate",e),e.elements.outerWrapper.prop("class",e.utils.arrayToClassname([e.classes.wrapper,e.$element.prop("class").replace(/\S+/g,e.classes.prefix+"-$&"),e.options.responsive?e.classes.responsive:""])),e.options.inheritOriginalWidth&&s>0&&e.elements.outerWrapper.width(s),e.unbindEvents(),e.$element.prop("disabled")?(e.elements.outerWrapper.addClass(e.classes.disabled),e.elements.input&&e.elements.input.prop("disabled",!0)):(e.state.enabled=!0,e.elements.outerWrapper.removeClass(e.classes.disabled),e.$li=e.elements.items.removeAttr("style").find("li"),e.bindEvents()),e.utils.triggerCallback("Activate",e)},getClassNames:function(){var t=this,s=t.options.customClass,i={};return e.each(l.split(" "),function(e,l){var n=s.prefix+l;i[l.toLowerCase()]=s.camelCase?n:t.utils.toDash(n)}),i.prefix=s.prefix,i},setLabel:function(){var t=this,s=t.options.labelBuilder;if(t.state.multiple){var i=e.isArray(t.state.currValue)?t.state.currValue:[t.state.currValue];i=0===i.length?[0]:i;var l=e.map(i,function(s){return e.grep(t.lookupItems,function(e){return e.index===s})[0]});l=e.grep(l,function(t){return l.length>1||0===l.length?""!==e.trim(t.value):t}),l=e.map(l,function(i){return e.isFunction(s)?s(i):t.utils.format(s,i)}),t.options.multiple.maxLabelEntries&&(l.length>=t.options.multiple.maxLabelEntries+1?(l=l.slice(0,t.options.multiple.maxLabelEntries),l.push(e.isFunction(s)?s({text:"..."}):t.utils.format(s,{text:"..."}))):l.slice(l.length-1)),t.elements.label.html(l.join(t.options.multiple.separator))}else{var n=t.lookupItems[t.state.currValue];t.elements.label.html(e.isFunction(s)?s(n):t.utils.format(s,n))}},populate:function(){var t=this,s=t.$element.children(),i=t.$element.find("option"),l=i.filter(":selected"),n=i.index(l),a=0,o=t.state.multiple?[]:0;l.length>1&&t.state.multiple&&(n=[],l.each(function(){n.push(e(this).index())})),t.state.currValue=~n?n:o,t.state.selectedIdx=t.state.currValue,t.state.highlightedIdx=t.state.currValue,t.items=[],t.lookupItems=[],s.length&&(s.each(function(s){var i=e(this);if(i.is("optgroup")){var l={element:i,label:i.prop("label"),groupDisabled:i.prop("disabled"),items:[]};i.children().each(function(s){var i=e(this);l.items[s]=t.getItemData(a,i,l.groupDisabled||i.prop("disabled")),t.lookupItems[a]=l.items[s],a++}),t.items[s]=l}else t.items[s]=t.getItemData(a,i,i.prop("disabled")),t.lookupItems[a]=t.items[s],a++}),t.setLabel(),t.elements.items.append(t.elements.itemsScroll.html(t.getItemsMarkup(t.items))))},getItemData:function(t,s,i){var l=this;return{index:t,element:s,value:s.val(),className:s.prop("class"),text:s.html(),slug:e.trim(l.utils.replaceDiacritics(s.html())),alt:s.attr("data-alt"),selected:s.prop("selected"),disabled:i}},getItemsMarkup:function(t){var s=this,i="<ul>";return e.isFunction(s.options.listBuilder)&&s.options.listBuilder&&(t=s.options.listBuilder(t)),e.each(t,function(t,l){void 0!==l.label?(i+=s.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',s.utils.arrayToClassname([s.classes.group,l.groupDisabled?"disabled":"",l.element.prop("class")]),s.classes.grouplabel,l.element.prop("label")),e.each(l.items,function(e,t){i+=s.getItemMarkup(t.index,t)}),i+="</ul>"):i+=s.getItemMarkup(l.index,l)}),i+"</ul>"},getItemMarkup:function(t,s){var i=this,l=i.options.optionsItemBuilder,n={value:s.value,text:s.text,slug:s.slug,index:s.index};return i.utils.format('<li data-index="{1}" class="{2}">{3}</li>',t,i.utils.arrayToClassname([s.className,t===i.items.length-1?"last":"",s.disabled?"disabled":"",s.selected?"selected":""]),e.isFunction(l)?i.utils.format(l(s,this.$element,t),s):i.utils.format(l,n))},unbindEvents:function(){var e=this;e.elements.wrapper.add(e.$element).add(e.elements.outerWrapper).add(e.elements.input).off(n)},bindEvents:function(){var t=this;t.elements.outerWrapper.on("mouseenter"+n+" mouseleave"+n,function(s){e(this).toggleClass(t.classes.hover,"mouseenter"===s.type),t.options.openOnHover&&(clearTimeout(t.closeTimer),"mouseleave"===s.type?t.closeTimer=setTimeout(e.proxy(t.close,t),t.options.hoverIntentTimeout):t.open())}),t.elements.wrapper.on("click"+n,function(e){t.state.opened?t.close():t.open(e)}),t.options.nativeOnMobile&&t.utils.isMobile()||(t.$element.on("focus"+n,function(){t.elements.input.focus()}),t.elements.input.prop({tabindex:t.originalTabindex,disabled:!1}).on("keydown"+n,e.proxy(t.handleKeys,t)).on("focusin"+n,function(e){t.elements.outerWrapper.addClass(t.classes.focus),t.elements.input.one("blur",function(){t.elements.input.blur()}),t.options.openOnFocus&&!t.state.opened&&t.open(e)}).on("focusout"+n,function(){t.elements.outerWrapper.removeClass(t.classes.focus)}).on("input propertychange",function(){var s=t.elements.input.val(),i=new RegExp("^"+t.utils.escapeRegExp(s),"i");clearTimeout(t.resetStr),t.resetStr=setTimeout(function(){t.elements.input.val("")},t.options.keySearchTimeout),s.length&&e.each(t.items,function(e,s){if(!s.disabled){if(i.test(s.text)||i.test(s.slug))return t.highlight(e),!1;if(s.alt)for(var l=s.alt.split("|"),n=0;n<l.length&&l[n];n++)if(i.test(l[n].trim()))return t.highlight(e),!1}})})),t.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return t.select(e(this).data("index")),!1}})},handleKeys:function(t){var s=this,i=t.which,l=s.options.keys,n=e.inArray(i,l.previous)>-1,a=e.inArray(i,l.next)>-1,o=e.inArray(i,l.select)>-1,r=e.inArray(i,l.open)>-1,u=s.state.highlightedIdx,p=n&&0===u||a&&u+1===s.items.length,c=0;if(13!==i&&32!==i||t.preventDefault(),n||a){if(!s.options.allowWrap&&p)return;n&&(c=s.utils.previousEnabledItem(s.lookupItems,u)),a&&(c=s.utils.nextEnabledItem(s.lookupItems,u)),s.highlight(c)}return o&&s.state.opened?(s.select(u),void(s.state.multiple&&s.options.multiple.keepMenuOpen||s.close())):void(r&&!s.state.opened&&s.open())},refresh:function(){var e=this;e.populate(),e.activate(),e.utils.triggerCallback("Refresh",e)},setOptionsDimensions:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),s=e.options.maxHeight,i=e.elements.items.outerWidth(),l=e.elements.wrapper.outerWidth()-(i-e.elements.items.width());!e.options.expandToItemText||l>i?e.finalWidth=l:(e.elements.items.css("overflow","scroll"),e.elements.outerWrapper.width(9e4),e.finalWidth=e.elements.items.width(),e.elements.items.css("overflow",""),e.elements.outerWrapper.width("")),e.elements.items.width(e.finalWidth).height()>s&&e.elements.items.height(s),t.removeClass(e.classes.tempshow)},isInViewport:function(){var e=this;if(e.options.forceRenderAbove===!0)e.elements.outerWrapper.addClass(e.classes.above);else if(e.options.forceRenderBelow===!0)e.elements.outerWrapper.addClass(e.classes.below);else{var t=s.scrollTop(),i=s.height(),l=e.elements.outerWrapper.offset().top,n=e.elements.outerWrapper.outerHeight(),a=l+n+e.itemsHeight<=t+i,o=l-e.itemsHeight>t,r=!a&&o,u=!r;e.elements.outerWrapper.toggleClass(e.classes.above,r),e.elements.outerWrapper.toggleClass(e.classes.below,u)}},detectItemVisibility:function(t){var s=this,i=s.$li.filter("[data-index]");s.state.multiple&&(t=e.isArray(t)&&0===t.length?0:t,t=e.isArray(t)?Math.min.apply(Math,t):t);var l=i.eq(t).outerHeight(),n=i[t].offsetTop,a=s.elements.itemsScroll.scrollTop(),o=n+2*l;s.elements.itemsScroll.scrollTop(o>a+s.itemsHeight?o-s.itemsHeight:n-l<a?n-l:a)},open:function(s){var l=this;return(!l.options.nativeOnMobile||!l.utils.isMobile())&&(l.utils.triggerCallback("BeforeOpen",l),s&&(s.preventDefault(),l.options.stopPropagation&&s.stopPropagation()),void(l.state.enabled&&(l.setOptionsDimensions(),e("."+l.classes.hideselect,"."+l.classes.open).children()[i]("close"),l.state.opened=!0,l.itemsHeight=l.elements.items.outerHeight(),l.itemsInnerHeight=l.elements.items.height(),l.elements.outerWrapper.addClass(l.classes.open),l.elements.input.val(""),s&&"focusin"!==s.type&&l.elements.input.focus(),setTimeout(function(){t.on("click"+n,e.proxy(l.close,l)).on("scroll"+n,e.proxy(l.isInViewport,l))},1),l.isInViewport(),l.options.preventWindowScroll&&t.on("mousewheel"+n+" DOMMouseScroll"+n,"."+l.classes.scroll,function(t){var s=t.originalEvent,i=e(this).scrollTop(),n=0;"detail"in s&&(n=s.detail*-1),"wheelDelta"in s&&(n=s.wheelDelta),"wheelDeltaY"in s&&(n=s.wheelDeltaY),"deltaY"in s&&(n=s.deltaY*-1),(i===this.scrollHeight-l.itemsInnerHeight&&n<0||0===i&&n>0)&&t.preventDefault()}),l.detectItemVisibility(l.state.selectedIdx),l.highlight(l.state.multiple?-1:l.state.selectedIdx),l.utils.triggerCallback("Open",l))))},close:function(){var e=this;e.utils.triggerCallback("BeforeClose",e),t.off(n),e.elements.outerWrapper.removeClass(e.classes.open),e.state.opened=!1,e.utils.triggerCallback("Close",e)},change:function(){var t=this;t.utils.triggerCallback("BeforeChange",t),t.state.multiple?(e.each(t.lookupItems,function(e){t.lookupItems[e].selected=!1,t.$element.find("option").prop("selected",!1)}),e.each(t.state.selectedIdx,function(e,s){t.lookupItems[s].selected=!0,t.$element.find("option").eq(s).prop("selected",!0)}),t.state.currValue=t.state.selectedIdx,t.setLabel(),t.utils.triggerCallback("Change",t)):t.state.currValue!==t.state.selectedIdx&&(t.$element.prop("selectedIndex",t.state.currValue=t.state.selectedIdx).data("value",t.lookupItems[t.state.selectedIdx].text),t.setLabel(),t.utils.triggerCallback("Change",t))},highlight:function(e){var t=this,s=t.$li.filter("[data-index]").removeClass("highlighted");t.utils.triggerCallback("BeforeHighlight",t),void 0===e||e===-1||t.lookupItems[e].disabled||(s.eq(t.state.highlightedIdx=e).addClass("highlighted"),t.detectItemVisibility(e),t.utils.triggerCallback("Highlight",t))},select:function(t){var s=this,i=s.$li.filter("[data-index]");if(s.utils.triggerCallback("BeforeSelect",s,t),void 0!==t&&t!==-1&&!s.lookupItems[t].disabled){if(s.state.multiple){s.state.selectedIdx=e.isArray(s.state.selectedIdx)?s.state.selectedIdx:[s.state.selectedIdx];var l=e.inArray(t,s.state.selectedIdx);l!==-1?s.state.selectedIdx.splice(l,1):s.state.selectedIdx.push(t),i.removeClass("selected").filter(function(t){return e.inArray(t,s.state.selectedIdx)!==-1}).addClass("selected")}else i.removeClass("selected").eq(s.state.selectedIdx=t).addClass("selected");s.state.multiple&&s.options.multiple.keepMenuOpen||s.close(),s.change(),s.utils.triggerCallback("Select",s,t)}},destroy:function(e){var t=this;t.state&&t.state.enabled&&(t.elements.items.add(t.elements.wrapper).add(t.elements.input).remove(),e||t.$element.removeData(i).removeData("value"),t.$element.prop("tabindex",t.originalTabindex).off(n).off(t.eventTriggers).unwrap().unwrap(),t.state.enabled=!1)}},e.fn[i]=function(t){return this.each(function(){var s=e.data(this,i);s&&!s.disableOnMobile?"string"==typeof t&&s[t]?s[t]():s.init(t):e.data(this,i,new r(this,t))})},e.fn[i].defaults={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,forceRenderAbove:!1,forceRenderBelow:!1,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:i,camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5zZWxlY3RyaWMuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyb290IiwialF1ZXJ5IiwidW5kZWZpbmVkIiwid2luZG93IiwicmVxdWlyZSIsIiQiLCIkZG9jIiwiZG9jdW1lbnQiLCIkd2luIiwicGx1Z2luTmFtZSIsImNsYXNzTGlzdCIsImV2ZW50TmFtZXNwYWNlU3VmZml4IiwiY2hhcnMiLCJkaWFjcml0aWNzIiwiU2VsZWN0cmljIiwiZWxlbWVudCIsIm9wdHMiLCJfdGhpcyIsInRoaXMiLCIkZWxlbWVudCIsInN0YXRlIiwibXVsdGlwbGUiLCJhdHRyIiwiZW5hYmxlZCIsIm9wZW5lZCIsImN1cnJWYWx1ZSIsInNlbGVjdGVkSWR4IiwiaGlnaGxpZ2h0ZWRJZHgiLCJldmVudFRyaWdnZXJzIiwib3BlbiIsImNsb3NlIiwiZGVzdHJveSIsInJlZnJlc2giLCJpbml0IiwicHJvdG90eXBlIiwidXRpbHMiLCJpc01vYmlsZSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJlc2NhcGVSZWdFeHAiLCJzdHIiLCJyZXBsYWNlIiwicmVwbGFjZURpYWNyaXRpY3MiLCJrIiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJmb3JtYXQiLCJmIiwiYSIsImFyZ3VtZW50cyIsInMiLCJpIiwicCIsIm5leHRFbmFibGVkSXRlbSIsInNlbGVjdEl0ZW1zIiwic2VsZWN0ZWQiLCJkaXNhYmxlZCIsInByZXZpb3VzRW5hYmxlZEl0ZW0iLCJ0b0Rhc2giLCJ0cmlnZ2VyQ2FsbGJhY2siLCJmbiIsInNjb3BlIiwiZWxtIiwiZnVuYyIsIm9wdGlvbnMiLCJhcmdzIiwiY29uY2F0Iiwic2xpY2UiLCJjYWxsIiwiaXNGdW5jdGlvbiIsImFwcGx5IiwidHJpZ2dlciIsImFycmF5VG9DbGFzc25hbWUiLCJhcnIiLCJuZXdBcnIiLCJncmVwIiwiaXRlbSIsInRyaW0iLCJqb2luIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJkaXNhYmxlT25Nb2JpbGUiLCJjbGFzc2VzIiwiZ2V0Q2xhc3NOYW1lcyIsImlucHV0IiwiY2xhc3MiLCJyZWFkb25seSIsIml0ZW1zIiwidGFiaW5kZXgiLCJpdGVtc1Njcm9sbCIsInNjcm9sbCIsIndyYXBwZXIiLCJwcmVmaXgiLCJodG1sIiwiYXJyb3dCdXR0b25NYXJrdXAiLCJsYWJlbCIsIm91dGVyV3JhcHBlciIsIndyYXAiLCJwYXJlbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiaGlkZVNlbGVjdFdyYXBwZXIiLCJoaWRlc2VsZWN0IiwiZWxlbWVudHMiLCJuYXRpdmVPbk1vYmlsZSIsImFkZENsYXNzIiwib24iLCJvcmlnaW5hbFRhYmluZGV4IiwicHJvcCIsInBvcHVsYXRlIiwiYWN0aXZhdGUiLCJoaWRkZW5DaGlsZHJlbiIsImNsb3Nlc3QiLCJjaGlsZHJlbiIsInRlbXBzaG93Iiwib3JpZ2luYWxXaWR0aCIsIndpZHRoIiwicmVtb3ZlQ2xhc3MiLCJyZXNwb25zaXZlIiwiaW5oZXJpdE9yaWdpbmFsV2lkdGgiLCJ1bmJpbmRFdmVudHMiLCIkbGkiLCJyZW1vdmVBdHRyIiwiZmluZCIsImJpbmRFdmVudHMiLCJjdXN0b21DbGFzcyIsImNsYXNzZXNPYmoiLCJlYWNoIiwic3BsaXQiLCJjdXJyQ2xhc3MiLCJjIiwiY2FtZWxDYXNlIiwic2V0TGFiZWwiLCJsYWJlbEJ1aWxkZXIiLCJjdXJyZW50VmFsdWVzIiwiaXNBcnJheSIsImxhYmVsTWFya3VwIiwibWFwIiwidmFsdWUiLCJsb29rdXBJdGVtcyIsImluZGV4IiwibWF4TGFiZWxFbnRyaWVzIiwicHVzaCIsInRleHQiLCJzZXBhcmF0b3IiLCJjdXJySXRlbSIsIiRvcHRpb25zIiwiJGp1c3RPcHRpb25zIiwiJHNlbGVjdGVkIiwiZmlsdGVyIiwic2VsZWN0ZWRJbmRleCIsImN1cnJJbmRleCIsImVtcHR5VmFsdWUiLCIkZWxtIiwiaXMiLCJvcHRpb25zR3JvdXAiLCJncm91cERpc2FibGVkIiwiZ2V0SXRlbURhdGEiLCJnZXRJdGVtc01hcmt1cCIsImlzRGlzYWJsZWQiLCJ2YWwiLCJjbGFzc05hbWUiLCJzbHVnIiwiYWx0IiwibWFya3VwIiwibGlzdEJ1aWxkZXIiLCJncm91cCIsImdyb3VwbGFiZWwiLCJnZXRJdGVtTWFya3VwIiwiaXRlbURhdGEiLCJpdGVtQnVpbGRlciIsIm9wdGlvbnNJdGVtQnVpbGRlciIsImZpbHRlcmVkSXRlbURhdGEiLCJhZGQiLCJvZmYiLCJlIiwidG9nZ2xlQ2xhc3MiLCJob3ZlciIsInR5cGUiLCJvcGVuT25Ib3ZlciIsImNsZWFyVGltZW91dCIsImNsb3NlVGltZXIiLCJzZXRUaW1lb3V0IiwicHJveHkiLCJob3ZlckludGVudFRpbWVvdXQiLCJmb2N1cyIsImhhbmRsZUtleXMiLCJvbmUiLCJibHVyIiwib3Blbk9uRm9jdXMiLCJzZWFyY2hSZWdFeHAiLCJSZWdFeHAiLCJyZXNldFN0ciIsImtleVNlYXJjaFRpbWVvdXQiLCJoaWdobGlnaHQiLCJhbHRJdGVtcyIsImFpIiwibW91c2Vkb3duIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjbGljayIsInNlbGVjdCIsImRhdGEiLCJrZXkiLCJ3aGljaCIsImtleXMiLCJpc1ByZXZLZXkiLCJpbkFycmF5IiwicHJldmlvdXMiLCJpc05leHRLZXkiLCJuZXh0IiwiaXNTZWxlY3RLZXkiLCJpc09wZW5LZXkiLCJpZHgiLCJpc0ZpcnN0T3JMYXN0SXRlbSIsImdvVG9JdGVtIiwiYWxsb3dXcmFwIiwia2VlcE1lbnVPcGVuIiwic2V0T3B0aW9uc0RpbWVuc2lvbnMiLCJtYXhIZWlnaHQiLCJpdGVtc1dpZHRoIiwib3V0ZXJXaWR0aCIsIndyYXBwZXJXaWR0aCIsImV4cGFuZFRvSXRlbVRleHQiLCJmaW5hbFdpZHRoIiwiY3NzIiwiaGVpZ2h0IiwiaXNJblZpZXdwb3J0IiwiZm9yY2VSZW5kZXJBYm92ZSIsImFib3ZlIiwiZm9yY2VSZW5kZXJCZWxvdyIsImJlbG93Iiwic2Nyb2xsVG9wIiwid2luSGVpZ2h0IiwidWlQb3NYIiwib2Zmc2V0IiwidG9wIiwidWlIZWlnaHQiLCJvdXRlckhlaWdodCIsImZpdHNEb3duIiwiaXRlbXNIZWlnaHQiLCJmaXRzQWJvdmUiLCJyZW5kZXJBYm92ZSIsInJlbmRlckJlbG93IiwiZGV0ZWN0SXRlbVZpc2liaWxpdHkiLCIkZmlsdGVyZWRMaSIsIk1hdGgiLCJtaW4iLCJsaUhlaWdodCIsImVxIiwibGlUb3AiLCJvZmZzZXRUb3AiLCJpdGVtc1Njcm9sbFRvcCIsInNjcm9sbFQiLCJpdGVtc0lubmVySGVpZ2h0IiwicHJldmVudFdpbmRvd1Njcm9sbCIsIm9yZ0V2ZW50Iiwib3JpZ2luYWxFdmVudCIsImRlbHRhWSIsImRldGFpbCIsIndoZWVsRGVsdGEiLCJ3aGVlbERlbHRhWSIsInNjcm9sbEhlaWdodCIsImNoYW5nZSIsImhhc1NlbGVjdGVkSW5kZXgiLCJzcGxpY2UiLCJwcmVzZXJ2ZURhdGEiLCJyZW1vdmUiLCJyZW1vdmVEYXRhIiwidW53cmFwIiwib25DaGFuZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBQUEsU0FBQUEsR0FHQSxrQkFBQUMsU0FBQUEsT0FBQUMsSUFDQUQsUUFBQSxVQUFBRCxHQUNBLGdCQUFBRyxTQUFBQSxPQUFBQyxRQUVBRCxPQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBU0EsTUFSQUMsVUFBQUQsSUFFQUEsRUFEQSxtQkFBQUUsUUFDQUMsUUFBQSxVQUVBQSxRQUFBLFVBQUFKLElBR0FMLEVBQUFNLEdBQ0FBLEdBSUFOLEVBQUFNLFNBRUEsU0FBQUksR0FDQSxZQUVBLElBQUFDLEdBQUFELEVBQUFFLFVBQ0FDLEVBQUFILEVBQUFGLFFBRUFNLEVBQUEsWUFDQUMsRUFBQSxtSEFDQUMsRUFBQSxNQUVBQyxHQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQUEsS0FDQUMsR0FDQSxlQUNBLGVBQ0EsZUFDQSxlQUNBLGVBQ0EsVUFDQSxVQUNBLGdCQVVBQyxFQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQUMsR0FBQUMsSUFFQUQsR0FBQUYs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QUFBLEdBQUEsR0FBQSxJQUNBQyxPQUFBLEVBQUEsS0FFQWdHLGFBQ0FqQyxPQUFBcEYsRUFDQTJILFdBQUEsR0FFQS9HLFVBQ0E0SCxVQUFBLEtBQ0F5RSxjQUFBLEVBQ0E1RSxpQkFBQSIsImZpbGUiOiJqcXVlcnkuc2VsZWN0cmljLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgLyogZ2xvYmFsIGRlZmluZSAqL1xyXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XHJcbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XHJcbiAgfSBlbHNlIGlmICggdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMgKSB7XHJcbiAgICAvLyBOb2RlL0NvbW1vbkpTXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCByb290LCBqUXVlcnkgKSB7XHJcbiAgICAgIGlmICggalF1ZXJ5ID09PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgaWYgKCB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyApIHtcclxuICAgICAgICAgIGpRdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKShyb290KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZmFjdG9yeShqUXVlcnkpO1xyXG4gICAgICByZXR1cm4galF1ZXJ5O1xyXG4gICAgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gQnJvd3NlciBnbG9iYWxzXHJcbiAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgfVxyXG59KGZ1bmN0aW9uKCQpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciAkZG9jID0gJChkb2N1bWVudCk7XHJcbiAgdmFyICR3aW4gPSAkKHdpbmRvdyk7XHJcblxyXG4gIHZhciBwbHVnaW5OYW1lID0gJ3NlbGVjdHJpYyc7XHJcbiAgdmFyIGNsYXNzTGlzdCA9ICdJbnB1dCBJdGVtcyBPcGVuIERpc2FibGVkIFRlbXBTaG93IEhpZGVTZWxlY3QgV3JhcHBlciBGb2N1cyBIb3ZlciBSZXNwb25zaXZlIEFib3ZlIEJlbG93IFNjcm9sbCBHcm91cCBHcm91cExhYmVsJztcclxuICB2YXIgZXZlbnROYW1lc3BhY2VTdWZmaXggPSAnLnNsJztcclxuXHJcbiAgdmFyIGNoYXJzID0gWydhJywgJ2UnLCAnaScsICdvJywgJ3UnLCAnbicsICdjJywgJ3knXTtcclxuICB2YXIgZGlhY3JpdGljcyA9IFtcclxuICAgIC9bXFx4RTAtXFx4RTVdL2csIC8vIGFcclxuICAgIC9bXFx4RTgtXFx4RUJdL2csIC8vIGVcclxuICAgIC9bXFx4RUMtXFx4RUZdL2csIC8vIGlcclxuICAgIC9bXFx4RjItXFx4RjZdL2csIC8vIG9cclxuICAgIC9bXFx4RjktXFx4RkNdL2csIC8vIHVcclxuICAgIC9bXFx4RjFdL2csICAgICAgLy8gblxyXG4gICAgL1tcXHhFN10vZywgICAgICAvLyBjXHJcbiAgICAvW1xceEZELVxceEZGXS9nICAvLyB5XHJcbiAgXTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIFNlbGVjdHJpY1xyXG4gICAqXHJcbiAgICogQGNvbnN0cnVjdG9yXHJcbiAgICogQHBhcmFtIHtOb2RlfSBlbGVtZW50IC0gVGhlICZsdDtzZWxlY3QmZ3Q7IGVsZW1lbnRcclxuICAgKiBAcGFyYW0ge29iamVjdH0gIG9wdHMgLSBPcHRpb25zXHJcbiAgICovXHJcbiAgdmFyIFNlbGVjdHJpYyA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdHMpIHtcclxuICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgX3RoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICBfdGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgX3RoaXMuc3RhdGUgPSB7XHJcbiAgICAgIG11bHRpcGxlICAgICAgIDogISFfdGhpcy4kZWxlbWVudC5hdHRyKCdtdWx0aXBsZScpLFxyXG4gICAgICBlbmFibGVkICAgICAgICA6IGZhbHNlLFxyXG4gICAgICBvcGVuZWQgICAgICAgICA6IGZhbHNlLFxyXG4gICAgICBjdXJyVmFsdWUgICAgICA6IC0xLFxyXG4gICAgICBzZWxlY3RlZElkeCAgICA6IC0xLFxyXG4gICAgICBoaWdobGlnaHRlZElkeCA6IC0xXHJcbiAgICB9O1xyXG5cclxuICAgIF90aGlzLmV2ZW50VHJpZ2dlcnMgPSB7XHJcbiAgICAgIG9wZW4gICAgOiBfdGhpcy5vcGVuLFxyXG4gICAgICBjbG9zZSAgIDogX3RoaXMuY2xvc2UsXHJcbiAgICAgIGRlc3Ryb3kgOiBfdGhpcy5kZXN0cm95LFxyXG4gICAgICByZWZyZXNoIDogX3RoaXMucmVmcmVzaCxcclxuICAgICAgaW5pdCAgICA6IF90aGlzLmluaXRcclxuICAgIH07XHJcblxyXG4gICAgX3RoaXMuaW5pdChvcHRzKTtcclxuICB9O1xyXG5cclxuICBTZWxlY3RyaWMucHJvdG90eXBlID0ge1xyXG4gICAgdXRpbHM6IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIERldGVjdCBtb2JpbGUgYnJvd3NlclxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG4gICAgICAgKi9cclxuICAgICAgaXNNb2JpbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiAvYW5kcm9pZHxpcChob25lfG9kfGFkKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogRXNjYXBlIGVzcGVjaWFsIGNoYXJhY3RlcnMgaW4gc3RyaW5nIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnMpXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byBiZSBlc2NhcGVkXHJcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgVGhlIHN0cmluZyB3aXRoIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgZXNjYXBlZFxyXG4gICAgICAgKi9cclxuICAgICAgZXNjYXBlUmVnRXhwOiBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJyk7IC8vICQmIG1lYW5zIHRoZSB3aG9sZSBtYXRjaGVkIHN0cmluZ1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlcGxhY2UgZGlhY3JpdGljc1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN0ciAtIFRoZSBzdHJpbmcgdG8gcmVwbGFjZSB0aGUgZGlhY3JpdGljc1xyXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgIFRoZSBzdHJpbmcgd2l0aCBkaWFjcml0aWNzIHJlcGxhY2VkIHdpdGggYXNjaWkgY2hhcmFjdGVyc1xyXG4gICAgICAgKi9cclxuICAgICAgcmVwbGFjZURpYWNyaXRpY3M6IGZ1bmN0aW9uKHN0cikge1xyXG4gICAgICAgIHZhciBrID0gZGlhY3JpdGljcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIHdoaWxlIChrLS0pIHtcclxuICAgICAgICAgIHN0ciA9IHN0ci50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoZGlhY3JpdGljc1trXSwgY2hhcnNba10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBGb3JtYXQgc3RyaW5nXHJcbiAgICAgICAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2F0ZXNnb3JhbC85ODQzNzVcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBmIC0gU3RyaW5nIHRvIGJlIGZvcm1hdGVkXHJcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgIFN0cmluZyBmb3JtYXRlZFxyXG4gICAgICAgKi9cclxuICAgICAgZm9ybWF0OiBmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgdmFyIGEgPSBhcmd1bWVudHM7IC8vIHN0b3JlIG91dGVyIGFyZ3VtZW50c1xyXG4gICAgICAgIHJldHVybiAoJycgKyBmKSAvLyBmb3JjZSBmb3JtYXQgc3BlY2lmaWVyIHRvIFN0cmluZ1xyXG4gICAgICAgICAgLnJlcGxhY2UoIC8vIHJlcGxhY2UgdG9rZW5zIGluIGZvcm1hdCBzcGVjaWZpZXJcclxuICAgICAgICAgICAgL1xceyg/OihcXGQrKXwoXFx3KykpXFx9L2csIC8vIG1hdGNoIHt0b2tlbn0gcmVmZXJlbmNlc1xyXG4gICAgICAgICAgICBmdW5jdGlvbihcclxuICAgICAgICAgICAgICBzLCAvLyB0aGUgbWF0Y2hlZCBzdHJpbmcgKGlnbm9yZWQpXHJcbiAgICAgICAgICAgICAgaSwgLy8gYW4gYXJndW1lbnQgaW5kZXhcclxuICAgICAgICAgICAgICBwIC8vIGEgcHJvcGVydHkgbmFtZVxyXG4gICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcCAmJiBhWzFdIC8vIGlmIHByb3BlcnR5IG5hbWUgYW5kIGZpcnN0IGFyZ3VtZW50IGV4aXN0XHJcbiAgICAgICAgICAgICAgICA/IGFbMV1bcF0gLy8gcmV0dXJuIHByb3BlcnR5IGZyb20gZmlyc3QgYXJndW1lbnRcclxuICAgICAgICAgICAgICAgIDogYVtpXTsgLy8gYXNzdW1lIGFyZ3VtZW50IGluZGV4IGFuZCByZXR1cm4gaS10aCBhcmd1bWVudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgdGhlIG5leHQgZW5hYmxlZCBpdGVtIGluIHRoZSBvcHRpb25zIGxpc3QuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge29iamVjdH0gc2VsZWN0SXRlbXMgLSBUaGUgb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAqIEBwYXJhbSAge251bWJlcn0gICAgc2VsZWN0ZWQgLSBJbmRleCBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbi5cclxuICAgICAgICogQHJldHVybiB7b2JqZWN0fSAgICAgICAgICAgICAgIFRoZSBuZXh0IGVuYWJsZWQgaXRlbS5cclxuICAgICAgICovXHJcbiAgICAgIG5leHRFbmFibGVkSXRlbTogZnVuY3Rpb24oc2VsZWN0SXRlbXMsIHNlbGVjdGVkKSB7XHJcbiAgICAgICAgd2hpbGUgKCBzZWxlY3RJdGVtc1sgc2VsZWN0ZWQgPSAoc2VsZWN0ZWQgKyAxKSAlIHNlbGVjdEl0ZW1zLmxlbmd0aCBdLmRpc2FibGVkICkge1xyXG4gICAgICAgICAgLy8gZW1wdHlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldCB0aGUgcHJldmlvdXMgZW5hYmxlZCBpdGVtIGluIHRoZSBvcHRpb25zIGxpc3QuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge29iamVjdH0gc2VsZWN0SXRlbXMgLSBUaGUgb3B0aW9ucyBvYmplY3QuXHJcbiAgICAgICAqIEBwYXJhbSAge251bWJlcn0gICAgc2VsZWN0ZWQgLSBJbmRleCBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbi5cclxuICAgICAgICogQHJldHVybiB7b2JqZWN0fSAgICAgICAgICAgICAgIFRoZSBwcmV2aW91cyBlbmFibGVkIGl0ZW0uXHJcbiAgICAgICAqL1xyXG4gICAgICBwcmV2aW91c0VuYWJsZWRJdGVtOiBmdW5jdGlvbihzZWxlY3RJdGVtcywgc2VsZWN0ZWQpIHtcclxuICAgICAgICB3aGlsZSAoIHNlbGVjdEl0ZW1zWyBzZWxlY3RlZCA9IChzZWxlY3RlZCA+IDAgPyBzZWxlY3RlZCA6IHNlbGVjdEl0ZW1zLmxlbmd0aCkgLSAxIF0uZGlzYWJsZWQgKSB7XHJcbiAgICAgICAgICAvLyBlbXB0eVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWQ7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVHJhbnNmb3JtIGNhbWVsQ2FzZSBzdHJpbmcgdG8gZGFzaC1jYXNlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN0ciAtIFRoZSBjYW1lbENhc2VkIHN0cmluZy5cclxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICBUaGUgc3RyaW5nIHRyYW5zZm9ybWVkIHRvIGRhc2gtY2FzZS5cclxuICAgICAgICovXHJcbiAgICAgIHRvRGFzaDogZnVuY3Rpb24oc3RyKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oW2EtejAtOV0pKFtBLVpdKS9nLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENhbGxzIHRoZSBldmVudHMgcmVnaXN0ZXJlZCB3aXRoIGZ1bmN0aW9uIG5hbWUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgICBmbiAtIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cclxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHNjb3BlIC0gU2NvcGUgdGhhdCBzaG91bGQgYmUgc2V0IG9uIHRoZSBmdW5jdGlvbi5cclxuICAgICAgICovXHJcbiAgICAgIHRyaWdnZXJDYWxsYmFjazogZnVuY3Rpb24oZm4sIHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIGVsbSA9IHNjb3BlLmVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGZ1bmMgPSBzY29wZS5vcHRpb25zWydvbicgKyBmbl07XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBbZWxtXS5jb25jYXQoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDEpKTtcclxuXHJcbiAgICAgICAgaWYgKCAkLmlzRnVuY3Rpb24oZnVuYykgKSB7XHJcbiAgICAgICAgICBmdW5jLmFwcGx5KGVsbSwgYXJncyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKGVsbSkudHJpZ2dlcihwbHVnaW5OYW1lICsgJy0nICsgdGhpcy50b0Rhc2goZm4pLCBhcmdzKTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUcmFuc2Zvcm0gYXJyYXkgbGlzdCB0byBjb25jYXRlbmF0ZWQgc3RyaW5nIGFuZCByZW1vdmUgZW1wdHkgdmFsdWVzXHJcbiAgICAgICAqIEBwYXJhbSAge2FycmF5fSBhcnIgLSBDbGFzcyBsaXN0XHJcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICBDb25jYXRlbmF0ZWQgc3RyaW5nXHJcbiAgICAgICAqL1xyXG4gICAgICBhcnJheVRvQ2xhc3NuYW1lOiBmdW5jdGlvbihhcnIpIHtcclxuICAgICAgICB2YXIgbmV3QXJyID0gJC5ncmVwKGFyciwgZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgcmV0dXJuICEhaXRlbTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuICQudHJpbShuZXdBcnIuam9pbignICcpKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKiogSW5pdGlhbGl6ZXMgKi9cclxuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIC8vIFNldCBvcHRpb25zXHJcbiAgICAgIF90aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5mbltwbHVnaW5OYW1lXS5kZWZhdWx0cywgX3RoaXMub3B0aW9ucywgb3B0cyk7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0JlZm9yZUluaXQnLCBfdGhpcyk7XHJcblxyXG4gICAgICAvLyBQcmVzZXJ2ZSBkYXRhXHJcbiAgICAgIF90aGlzLmRlc3Ryb3kodHJ1ZSk7XHJcblxyXG4gICAgICAvLyBEaXNhYmxlIG9uIG1vYmlsZSBicm93c2Vyc1xyXG4gICAgICBpZiAoIF90aGlzLm9wdGlvbnMuZGlzYWJsZU9uTW9iaWxlICYmIF90aGlzLnV0aWxzLmlzTW9iaWxlKCkgKSB7XHJcbiAgICAgICAgX3RoaXMuZGlzYWJsZU9uTW9iaWxlID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCBjbGFzc2VzXHJcbiAgICAgIF90aGlzLmNsYXNzZXMgPSBfdGhpcy5nZXRDbGFzc05hbWVzKCk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgZWxlbWVudHNcclxuICAgICAgdmFyIGlucHV0ICAgICAgICAgICAgICA9ICQoJzxpbnB1dC8+JywgeyAnY2xhc3MnOiBfdGhpcy5jbGFzc2VzLmlucHV0LCAncmVhZG9ubHknOiBfdGhpcy51dGlscy5pc01vYmlsZSgpIH0pO1xyXG4gICAgICB2YXIgaXRlbXMgICAgICAgICAgICAgID0gJCgnPGRpdi8+JywgICB7ICdjbGFzcyc6IF90aGlzLmNsYXNzZXMuaXRlbXMsICd0YWJpbmRleCc6IC0xIH0pO1xyXG4gICAgICB2YXIgaXRlbXNTY3JvbGwgICAgICAgID0gJCgnPGRpdi8+JywgICB7ICdjbGFzcyc6IF90aGlzLmNsYXNzZXMuc2Nyb2xsIH0pO1xyXG4gICAgICB2YXIgd3JhcHBlciAgICAgICAgICAgID0gJCgnPGRpdi8+JywgICB7ICdjbGFzcyc6IF90aGlzLmNsYXNzZXMucHJlZml4LCAnaHRtbCc6IF90aGlzLm9wdGlvbnMuYXJyb3dCdXR0b25NYXJrdXAgfSk7XHJcbiAgICAgIHZhciBsYWJlbCAgICAgICAgICAgICAgPSAkKCc8c3Bhbi8+JywgIHsgJ2NsYXNzJzogJ2xhYmVsJyB9KTtcclxuICAgICAgdmFyIG91dGVyV3JhcHBlciAgICAgICA9IF90aGlzLiRlbGVtZW50LndyYXAoJzxkaXYvPicpLnBhcmVudCgpLmFwcGVuZCh3cmFwcGVyLnByZXBlbmQobGFiZWwpLCBpdGVtcywgaW5wdXQpO1xyXG4gICAgICB2YXIgaGlkZVNlbGVjdFdyYXBwZXIgID0gJCgnPGRpdi8+JywgICB7ICdjbGFzcyc6IF90aGlzLmNsYXNzZXMuaGlkZXNlbGVjdCB9KTtcclxuXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzID0ge1xyXG4gICAgICAgIGlucHV0ICAgICAgICA6IGlucHV0LFxyXG4gICAgICAgIGl0ZW1zICAgICAgICA6IGl0ZW1zLFxyXG4gICAgICAgIGl0ZW1zU2Nyb2xsICA6IGl0ZW1zU2Nyb2xsLFxyXG4gICAgICAgIHdyYXBwZXIgICAgICA6IHdyYXBwZXIsXHJcbiAgICAgICAgbGFiZWwgICAgICAgIDogbGFiZWwsXHJcbiAgICAgICAgb3V0ZXJXcmFwcGVyIDogb3V0ZXJXcmFwcGVyXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoIF90aGlzLm9wdGlvbnMubmF0aXZlT25Nb2JpbGUgJiYgX3RoaXMudXRpbHMuaXNNb2JpbGUoKSApIHtcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5pbnB1dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBoaWRlU2VsZWN0V3JhcHBlci5hZGRDbGFzcyhfdGhpcy5jbGFzc2VzLnByZWZpeCArICctaXMtbmF0aXZlJyk7XHJcblxyXG4gICAgICAgIF90aGlzLiRlbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIF90aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgX3RoaXMuJGVsZW1lbnRcclxuICAgICAgICAub24oX3RoaXMuZXZlbnRUcmlnZ2VycylcclxuICAgICAgICAud3JhcChoaWRlU2VsZWN0V3JhcHBlcik7XHJcblxyXG4gICAgICBfdGhpcy5vcmlnaW5hbFRhYmluZGV4ID0gX3RoaXMuJGVsZW1lbnQucHJvcCgndGFiaW5kZXgnKTtcclxuICAgICAgX3RoaXMuJGVsZW1lbnQucHJvcCgndGFiaW5kZXgnLCAtMSk7XHJcblxyXG4gICAgICBfdGhpcy5wb3B1bGF0ZSgpO1xyXG4gICAgICBfdGhpcy5hY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdJbml0JywgX3RoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiogQWN0aXZhdGVzIHRoZSBwbHVnaW4gKi9cclxuICAgIGFjdGl2YXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyIGhpZGRlbkNoaWxkcmVuID0gX3RoaXMuZWxlbWVudHMuaXRlbXMuY2xvc2VzdCgnOnZpc2libGUnKS5jaGlsZHJlbignOmhpZGRlbicpLmFkZENsYXNzKF90aGlzLmNsYXNzZXMudGVtcHNob3cpO1xyXG4gICAgICB2YXIgb3JpZ2luYWxXaWR0aCA9IF90aGlzLiRlbGVtZW50LndpZHRoKCk7XHJcblxyXG4gICAgICBoaWRkZW5DaGlsZHJlbi5yZW1vdmVDbGFzcyhfdGhpcy5jbGFzc2VzLnRlbXBzaG93KTtcclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQmVmb3JlQWN0aXZhdGUnLCBfdGhpcyk7XHJcblxyXG4gICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIucHJvcCgnY2xhc3MnLFxyXG4gICAgICAgIF90aGlzLnV0aWxzLmFycmF5VG9DbGFzc25hbWUoW1xyXG4gICAgICAgICAgX3RoaXMuY2xhc3Nlcy53cmFwcGVyLFxyXG4gICAgICAgICAgX3RoaXMuJGVsZW1lbnQucHJvcCgnY2xhc3MnKS5yZXBsYWNlKC9cXFMrL2csIF90aGlzLmNsYXNzZXMucHJlZml4ICsgJy0kJicpLFxyXG4gICAgICAgICAgX3RoaXMub3B0aW9ucy5yZXNwb25zaXZlID8gX3RoaXMuY2xhc3Nlcy5yZXNwb25zaXZlIDogJydcclxuICAgICAgICBdKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKCBfdGhpcy5vcHRpb25zLmluaGVyaXRPcmlnaW5hbFdpZHRoICYmIG9yaWdpbmFsV2lkdGggPiAwICkge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci53aWR0aChvcmlnaW5hbFdpZHRoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgX3RoaXMudW5iaW5kRXZlbnRzKCk7XHJcblxyXG4gICAgICBpZiAoICFfdGhpcy4kZWxlbWVudC5wcm9wKCdkaXNhYmxlZCcpICkge1xyXG4gICAgICAgIF90aGlzLnN0YXRlLmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBOb3QgZGlzYWJsZWQsIHNvLi4uIFJlbW92aW5nIGRpc2FibGVkIGNsYXNzXHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLnJlbW92ZUNsYXNzKF90aGlzLmNsYXNzZXMuZGlzYWJsZWQpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgc3R5bGVzIGZyb20gaXRlbXMgYm94XHJcbiAgICAgICAgLy8gRml4IGluY29ycmVjdCBoZWlnaHQgd2hlbiByZWZyZXNoZWQgaXMgdHJpZ2dlcmVkIHdpdGggZmV3ZXIgb3B0aW9uc1xyXG4gICAgICAgIF90aGlzLiRsaSA9IF90aGlzLmVsZW1lbnRzLml0ZW1zLnJlbW92ZUF0dHIoJ3N0eWxlJykuZmluZCgnbGknKTtcclxuXHJcbiAgICAgICAgX3RoaXMuYmluZEV2ZW50cygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci5hZGRDbGFzcyhfdGhpcy5jbGFzc2VzLmRpc2FibGVkKTtcclxuXHJcbiAgICAgICAgaWYgKCBfdGhpcy5lbGVtZW50cy5pbnB1dCApIHtcclxuICAgICAgICAgIF90aGlzLmVsZW1lbnRzLmlucHV0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0FjdGl2YXRlJywgX3RoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGNsYXNzTmFtZXMgZm9yIGVsZW1lbnRzXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7b2JqZWN0fSBDbGFzc2VzIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBnZXRDbGFzc05hbWVzOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyIGN1c3RvbUNsYXNzID0gX3RoaXMub3B0aW9ucy5jdXN0b21DbGFzcztcclxuICAgICAgdmFyIGNsYXNzZXNPYmogPSB7fTtcclxuXHJcbiAgICAgICQuZWFjaChjbGFzc0xpc3Quc3BsaXQoJyAnKSwgZnVuY3Rpb24oaSwgY3VyckNsYXNzKSB7XHJcbiAgICAgICAgdmFyIGMgPSBjdXN0b21DbGFzcy5wcmVmaXggKyBjdXJyQ2xhc3M7XHJcbiAgICAgICAgY2xhc3Nlc09ialtjdXJyQ2xhc3MudG9Mb3dlckNhc2UoKV0gPSBjdXN0b21DbGFzcy5jYW1lbENhc2UgPyBjIDogX3RoaXMudXRpbHMudG9EYXNoKGMpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNsYXNzZXNPYmoucHJlZml4ID0gY3VzdG9tQ2xhc3MucHJlZml4O1xyXG5cclxuICAgICAgcmV0dXJuIGNsYXNzZXNPYmo7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBTZXQgdGhlIGxhYmVsIHRleHQgKi9cclxuICAgIHNldExhYmVsOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyIGxhYmVsQnVpbGRlciA9IF90aGlzLm9wdGlvbnMubGFiZWxCdWlsZGVyO1xyXG5cclxuICAgICAgaWYgKCBfdGhpcy5zdGF0ZS5tdWx0aXBsZSApIHtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgY3VycmVudFZhbHVlcyBpcyBhbiBhcnJheVxyXG4gICAgICAgIHZhciBjdXJyZW50VmFsdWVzID0gJC5pc0FycmF5KF90aGlzLnN0YXRlLmN1cnJWYWx1ZSkgPyBfdGhpcy5zdGF0ZS5jdXJyVmFsdWUgOiBbX3RoaXMuc3RhdGUuY3VyclZhbHVlXTtcclxuICAgICAgICAvLyBJJ20gbm90IGhhcHB5IHdpdGggdGhpcywgYnV0IGN1cnJlbnRWYWx1ZXMgY2FuIGJlIGFuIGVtcHR5XHJcbiAgICAgICAgLy8gYXJyYXkgYW5kIHdlIG5lZWQgdG8gZmFsbGJhY2sgdG8gdGhlIGRlZmF1bHQgb3B0aW9uLlxyXG4gICAgICAgIGN1cnJlbnRWYWx1ZXMgPSBjdXJyZW50VmFsdWVzLmxlbmd0aCA9PT0gMCA/IFswXSA6IGN1cnJlbnRWYWx1ZXM7XHJcblxyXG4gICAgICAgIHZhciBsYWJlbE1hcmt1cCA9ICQubWFwKGN1cnJlbnRWYWx1ZXMsIGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICByZXR1cm4gJC5ncmVwKF90aGlzLmxvb2t1cEl0ZW1zLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmluZGV4ID09PSB2YWx1ZTtcclxuICAgICAgICAgIH0pWzBdOyAvLyB3ZSBkb24ndCB3YW50IG5lc3RlZCBhcnJheXMgaGVyZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsYWJlbE1hcmt1cCA9ICQuZ3JlcChsYWJlbE1hcmt1cCwgZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgLy8gSGlkZSBkZWZhdWx0IChwbGVhc2UgY2hvb3NlKSBpZiBtb3JlIHRoZW4gb25lIGVsZW1lbnQgd2VyZSBzZWxlY3RlZC5cclxuICAgICAgICAgIC8vIElmIG5vIG9wdGlvbiB2YWx1ZSB3ZXJlIGdpdmVuIHZhbHVlIGlzIHNldCB0byBvcHRpb24gdGV4dCBieSBkZWZhdWx0XHJcbiAgICAgICAgICBpZiAoIGxhYmVsTWFya3VwLmxlbmd0aCA+IDEgfHwgbGFiZWxNYXJrdXAubGVuZ3RoID09PSAwICkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC50cmltKGl0ZW0udmFsdWUpICE9PSAnJztcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsYWJlbE1hcmt1cCA9ICQubWFwKGxhYmVsTWFya3VwLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICByZXR1cm4gJC5pc0Z1bmN0aW9uKGxhYmVsQnVpbGRlcilcclxuICAgICAgICAgICAgPyBsYWJlbEJ1aWxkZXIoaXRlbSlcclxuICAgICAgICAgICAgOiBfdGhpcy51dGlscy5mb3JtYXQobGFiZWxCdWlsZGVyLCBpdGVtKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTGltaXQgdGhlIGFtb3VudCBvZiBzZWxlY3RlZCB2YWx1ZXMgc2hvd24gaW4gbGFiZWxcclxuICAgICAgICBpZiAoIF90aGlzLm9wdGlvbnMubXVsdGlwbGUubWF4TGFiZWxFbnRyaWVzICkge1xyXG4gICAgICAgICAgaWYgKCBsYWJlbE1hcmt1cC5sZW5ndGggPj0gX3RoaXMub3B0aW9ucy5tdWx0aXBsZS5tYXhMYWJlbEVudHJpZXMgKyAxICkge1xyXG4gICAgICAgICAgICBsYWJlbE1hcmt1cCA9IGxhYmVsTWFya3VwLnNsaWNlKDAsIF90aGlzLm9wdGlvbnMubXVsdGlwbGUubWF4TGFiZWxFbnRyaWVzKTtcclxuICAgICAgICAgICAgbGFiZWxNYXJrdXAucHVzaChcclxuICAgICAgICAgICAgICAkLmlzRnVuY3Rpb24obGFiZWxCdWlsZGVyKVxyXG4gICAgICAgICAgICAgICAgPyBsYWJlbEJ1aWxkZXIoeyB0ZXh0OiAnLi4uJyB9KVxyXG4gICAgICAgICAgICAgICAgOiBfdGhpcy51dGlscy5mb3JtYXQobGFiZWxCdWlsZGVyLCB7IHRleHQ6ICcuLi4nIH0pKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxhYmVsTWFya3VwLnNsaWNlKGxhYmVsTWFya3VwLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5sYWJlbC5odG1sKGxhYmVsTWFya3VwLmpvaW4oX3RoaXMub3B0aW9ucy5tdWx0aXBsZS5zZXBhcmF0b3IpKTtcclxuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGN1cnJJdGVtID0gX3RoaXMubG9va3VwSXRlbXNbX3RoaXMuc3RhdGUuY3VyclZhbHVlXTtcclxuXHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMubGFiZWwuaHRtbChcclxuICAgICAgICAgICQuaXNGdW5jdGlvbihsYWJlbEJ1aWxkZXIpXHJcbiAgICAgICAgICAgID8gbGFiZWxCdWlsZGVyKGN1cnJJdGVtKVxyXG4gICAgICAgICAgICA6IF90aGlzLnV0aWxzLmZvcm1hdChsYWJlbEJ1aWxkZXIsIGN1cnJJdGVtKVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqIEdldCBhbmQgc2F2ZSB0aGUgYXZhaWxhYmxlIG9wdGlvbnMgKi9cclxuICAgIHBvcHVsYXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyICRvcHRpb25zID0gX3RoaXMuJGVsZW1lbnQuY2hpbGRyZW4oKTtcclxuICAgICAgdmFyICRqdXN0T3B0aW9ucyA9IF90aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpO1xyXG4gICAgICB2YXIgJHNlbGVjdGVkID0gJGp1c3RPcHRpb25zLmZpbHRlcignOnNlbGVjdGVkJyk7XHJcbiAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gJGp1c3RPcHRpb25zLmluZGV4KCRzZWxlY3RlZCk7XHJcbiAgICAgIHZhciBjdXJySW5kZXggPSAwO1xyXG4gICAgICB2YXIgZW1wdHlWYWx1ZSA9IChfdGhpcy5zdGF0ZS5tdWx0aXBsZSA/IFtdIDogMCk7XHJcblxyXG4gICAgICBpZiAoICRzZWxlY3RlZC5sZW5ndGggPiAxICYmIF90aGlzLnN0YXRlLm11bHRpcGxlICkge1xyXG4gICAgICAgIHNlbGVjdGVkSW5kZXggPSBbXTtcclxuICAgICAgICAkc2VsZWN0ZWQuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNlbGVjdGVkSW5kZXgucHVzaCgkKHRoaXMpLmluZGV4KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGhpcy5zdGF0ZS5jdXJyVmFsdWUgPSAofnNlbGVjdGVkSW5kZXggPyBzZWxlY3RlZEluZGV4IDogZW1wdHlWYWx1ZSk7XHJcbiAgICAgIF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4ID0gX3RoaXMuc3RhdGUuY3VyclZhbHVlO1xyXG4gICAgICBfdGhpcy5zdGF0ZS5oaWdobGlnaHRlZElkeCA9IF90aGlzLnN0YXRlLmN1cnJWYWx1ZTtcclxuICAgICAgX3RoaXMuaXRlbXMgPSBbXTtcclxuICAgICAgX3RoaXMubG9va3VwSXRlbXMgPSBbXTtcclxuXHJcbiAgICAgIGlmICggJG9wdGlvbnMubGVuZ3RoICkge1xyXG4gICAgICAgIC8vIEJ1aWxkIG9wdGlvbnMgbWFya3VwXHJcbiAgICAgICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICB2YXIgJGVsbSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgaWYgKCAkZWxtLmlzKCdvcHRncm91cCcpICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG9wdGlvbnNHcm91cCA9IHtcclxuICAgICAgICAgICAgICBlbGVtZW50ICAgICAgIDogJGVsbSxcclxuICAgICAgICAgICAgICBsYWJlbCAgICAgICAgIDogJGVsbS5wcm9wKCdsYWJlbCcpLFxyXG4gICAgICAgICAgICAgIGdyb3VwRGlzYWJsZWQgOiAkZWxtLnByb3AoJ2Rpc2FibGVkJyksXHJcbiAgICAgICAgICAgICAgaXRlbXMgICAgICAgICA6IFtdXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAkZWxtLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpKSB7XHJcbiAgICAgICAgICAgICAgdmFyICRlbG0gPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICBvcHRpb25zR3JvdXAuaXRlbXNbaV0gPSBfdGhpcy5nZXRJdGVtRGF0YShjdXJySW5kZXgsICRlbG0sIG9wdGlvbnNHcm91cC5ncm91cERpc2FibGVkIHx8ICRlbG0ucHJvcCgnZGlzYWJsZWQnKSk7XHJcblxyXG4gICAgICAgICAgICAgIF90aGlzLmxvb2t1cEl0ZW1zW2N1cnJJbmRleF0gPSBvcHRpb25zR3JvdXAuaXRlbXNbaV07XHJcblxyXG4gICAgICAgICAgICAgIGN1cnJJbmRleCsrO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIF90aGlzLml0ZW1zW2ldID0gb3B0aW9uc0dyb3VwO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5pdGVtc1tpXSA9IF90aGlzLmdldEl0ZW1EYXRhKGN1cnJJbmRleCwgJGVsbSwgJGVsbS5wcm9wKCdkaXNhYmxlZCcpKTtcclxuXHJcbiAgICAgICAgICAgIF90aGlzLmxvb2t1cEl0ZW1zW2N1cnJJbmRleF0gPSBfdGhpcy5pdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJJbmRleCsrO1xyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgX3RoaXMuc2V0TGFiZWwoKTtcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5pdGVtcy5hcHBlbmQoIF90aGlzLmVsZW1lbnRzLml0ZW1zU2Nyb2xsLmh0bWwoIF90aGlzLmdldEl0ZW1zTWFya3VwKF90aGlzLml0ZW1zKSApICk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBpdGVtcyBvYmplY3QgZGF0YVxyXG4gICAgICogQHBhcmFtICB7aW50ZWdlcn0gaW5kZXggICAgICAtIEN1cnJlbnQgaXRlbSBpbmRleFxyXG4gICAgICogQHBhcmFtICB7bm9kZX0gICAgJGVsbSAgICAgICAtIEN1cnJlbnQgZWxlbWVudCBub2RlXHJcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBpc0Rpc2FibGVkIC0gQ3VycmVudCBlbGVtZW50IGRpc2FibGVkIHN0YXRlXHJcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgSXRlbSBvYmplY3RcclxuICAgICAqL1xyXG4gICAgZ2V0SXRlbURhdGE6IGZ1bmN0aW9uKGluZGV4LCAkZWxtLCBpc0Rpc2FibGVkKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGluZGV4ICAgICA6IGluZGV4LFxyXG4gICAgICAgIGVsZW1lbnQgICA6ICRlbG0sXHJcbiAgICAgICAgdmFsdWUgICAgIDogJGVsbS52YWwoKSxcclxuICAgICAgICBjbGFzc05hbWUgOiAkZWxtLnByb3AoJ2NsYXNzJyksXHJcbiAgICAgICAgdGV4dCAgICAgIDogJGVsbS5odG1sKCksXHJcbiAgICAgICAgc2x1ZyAgICAgIDogJC50cmltKF90aGlzLnV0aWxzLnJlcGxhY2VEaWFjcml0aWNzKCRlbG0uaHRtbCgpKSksXHJcbiAgICAgICAgYWx0ICAgICAgIDogJGVsbS5hdHRyKCdkYXRhLWFsdCcpLFxyXG4gICAgICAgIHNlbGVjdGVkICA6ICRlbG0ucHJvcCgnc2VsZWN0ZWQnKSxcclxuICAgICAgICBkaXNhYmxlZCAgOiBpc0Rpc2FibGVkXHJcbiAgICAgIH07XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgb3B0aW9ucyBtYXJrdXBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtvYmplY3R9IGl0ZW1zIC0gT2JqZWN0IGNvbnRhaW5pbmcgYWxsIGF2YWlsYWJsZSBvcHRpb25zXHJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgICAgSFRNTCBmb3IgdGhlIG9wdGlvbnMgYm94XHJcbiAgICAgKi9cclxuICAgIGdldEl0ZW1zTWFya3VwOiBmdW5jdGlvbihpdGVtcykge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgbWFya3VwID0gJzx1bD4nO1xyXG5cclxuICAgICAgaWYgKCAkLmlzRnVuY3Rpb24oX3RoaXMub3B0aW9ucy5saXN0QnVpbGRlcikgJiYgX3RoaXMub3B0aW9ucy5saXN0QnVpbGRlciApIHtcclxuICAgICAgICBpdGVtcyA9IF90aGlzLm9wdGlvbnMubGlzdEJ1aWxkZXIoaXRlbXMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGksIGVsbSkge1xyXG4gICAgICAgIGlmICggZWxtLmxhYmVsICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG4gICAgICAgICAgbWFya3VwICs9IF90aGlzLnV0aWxzLmZvcm1hdCgnPHVsIGNsYXNzPVwiezF9XCI+PGxpIGNsYXNzPVwiezJ9XCI+ezN9PC9saT4nLFxyXG4gICAgICAgICAgICBfdGhpcy51dGlscy5hcnJheVRvQ2xhc3NuYW1lKFtcclxuICAgICAgICAgICAgICBfdGhpcy5jbGFzc2VzLmdyb3VwLFxyXG4gICAgICAgICAgICAgIGVsbS5ncm91cERpc2FibGVkID8gJ2Rpc2FibGVkJyA6ICcnLFxyXG4gICAgICAgICAgICAgIGVsbS5lbGVtZW50LnByb3AoJ2NsYXNzJylcclxuICAgICAgICAgICAgXSksXHJcbiAgICAgICAgICAgIF90aGlzLmNsYXNzZXMuZ3JvdXBsYWJlbCxcclxuICAgICAgICAgICAgZWxtLmVsZW1lbnQucHJvcCgnbGFiZWwnKVxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAkLmVhY2goZWxtLml0ZW1zLCBmdW5jdGlvbihpLCBlbG0pIHtcclxuICAgICAgICAgICAgbWFya3VwICs9IF90aGlzLmdldEl0ZW1NYXJrdXAoZWxtLmluZGV4LCBlbG0pO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgbWFya3VwICs9ICc8L3VsPic7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgbWFya3VwICs9IF90aGlzLmdldEl0ZW1NYXJrdXAoZWxtLmluZGV4LCBlbG0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIG1hcmt1cCArICc8L3VsPic7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgZXZlcnkgb3B0aW9uIG1hcmt1cFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge251bWJlcn0gaW5kZXggICAgLSBJbmRleCBvZiBjdXJyZW50IGl0ZW1cclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gaXRlbURhdGEgLSBDdXJyZW50IGl0ZW1cclxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICBIVE1MIGZvciB0aGUgb3B0aW9uXHJcbiAgICAgKi9cclxuICAgIGdldEl0ZW1NYXJrdXA6IGZ1bmN0aW9uKGluZGV4LCBpdGVtRGF0YSkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgaXRlbUJ1aWxkZXIgPSBfdGhpcy5vcHRpb25zLm9wdGlvbnNJdGVtQnVpbGRlcjtcclxuICAgICAgLy8gbGltaXQgYWNjZXNzIHRvIGl0ZW0gZGF0YSB0byBwcm92aWRlIGEgc2ltcGxlIGludGVyZmFjZVxyXG4gICAgICAvLyB0byBtb3N0IHJlbGV2YW50IG9wdGlvbnMuXHJcbiAgICAgIHZhciBmaWx0ZXJlZEl0ZW1EYXRhID0ge1xyXG4gICAgICAgIHZhbHVlOiBpdGVtRGF0YS52YWx1ZSxcclxuICAgICAgICB0ZXh0IDogaXRlbURhdGEudGV4dCxcclxuICAgICAgICBzbHVnIDogaXRlbURhdGEuc2x1ZyxcclxuICAgICAgICBpbmRleDogaXRlbURhdGEuaW5kZXhcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHJldHVybiBfdGhpcy51dGlscy5mb3JtYXQoJzxsaSBkYXRhLWluZGV4PVwiezF9XCIgY2xhc3M9XCJ7Mn1cIj57M308L2xpPicsXHJcbiAgICAgICAgaW5kZXgsXHJcbiAgICAgICAgX3RoaXMudXRpbHMuYXJyYXlUb0NsYXNzbmFtZShbXHJcbiAgICAgICAgICBpdGVtRGF0YS5jbGFzc05hbWUsXHJcbiAgICAgICAgICBpbmRleCA9PT0gX3RoaXMuaXRlbXMubGVuZ3RoIC0gMSAgPyAnbGFzdCcgICAgIDogJycsXHJcbiAgICAgICAgICBpdGVtRGF0YS5kaXNhYmxlZCAgICAgICAgICAgICAgICAgPyAnZGlzYWJsZWQnIDogJycsXHJcbiAgICAgICAgICBpdGVtRGF0YS5zZWxlY3RlZCAgICAgICAgICAgICAgICAgPyAnc2VsZWN0ZWQnIDogJydcclxuICAgICAgICBdKSxcclxuICAgICAgICAkLmlzRnVuY3Rpb24oaXRlbUJ1aWxkZXIpXHJcbiAgICAgICAgICA/IF90aGlzLnV0aWxzLmZvcm1hdChpdGVtQnVpbGRlcihpdGVtRGF0YSwgdGhpcy4kZWxlbWVudCwgaW5kZXgpLCBpdGVtRGF0YSlcclxuICAgICAgICAgIDogX3RoaXMudXRpbHMuZm9ybWF0KGl0ZW1CdWlsZGVyLCBmaWx0ZXJlZEl0ZW1EYXRhKVxyXG4gICAgICApO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiogUmVtb3ZlIGV2ZW50cyBvbiB0aGUgZWxlbWVudHMgKi9cclxuICAgIHVuYmluZEV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBfdGhpcy5lbGVtZW50cy53cmFwcGVyXHJcbiAgICAgICAgLmFkZChfdGhpcy4kZWxlbWVudClcclxuICAgICAgICAuYWRkKF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlcilcclxuICAgICAgICAuYWRkKF90aGlzLmVsZW1lbnRzLmlucHV0KVxyXG4gICAgICAgIC5vZmYoZXZlbnROYW1lc3BhY2VTdWZmaXgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiogQmluZCBldmVudHMgb24gdGhlIGVsZW1lbnRzICovXHJcbiAgICBiaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci5vbignbW91c2VlbnRlcicgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCArICcgbW91c2VsZWF2ZScgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoX3RoaXMuY2xhc3Nlcy5ob3ZlciwgZS50eXBlID09PSAnbW91c2VlbnRlcicpO1xyXG5cclxuICAgICAgICAvLyBEZWxheSBjbG9zZSBlZmZlY3Qgd2hlbiBvcGVuT25Ib3ZlciBpcyB0cnVlXHJcbiAgICAgICAgaWYgKCBfdGhpcy5vcHRpb25zLm9wZW5PbkhvdmVyICkge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KF90aGlzLmNsb3NlVGltZXIpO1xyXG5cclxuICAgICAgICAgIGlmICggZS50eXBlID09PSAnbW91c2VsZWF2ZScgKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNsb3NlVGltZXIgPSBzZXRUaW1lb3V0KCQucHJveHkoX3RoaXMuY2xvc2UsIF90aGlzKSwgX3RoaXMub3B0aW9ucy5ob3ZlckludGVudFRpbWVvdXQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX3RoaXMub3BlbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUb2dnbGUgb3Blbi9jbG9zZVxyXG4gICAgICBfdGhpcy5lbGVtZW50cy53cmFwcGVyLm9uKCdjbGljaycgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIF90aGlzLnN0YXRlLm9wZW5lZCA/IF90aGlzLmNsb3NlKCkgOiBfdGhpcy5vcGVuKGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFRyYW5zbGF0ZSBvcmlnaW5hbCBlbGVtZW50IGZvY3VzIGV2ZW50IHRvIGR1bW15IGlucHV0LlxyXG4gICAgICAvLyBEaXNhYmxlZCBvbiBtb2JpbGUgZGV2aWNlcyBiZWNhdXNlIHRoZSBkZWZhdWx0IG9wdGlvbiBsaXN0IGlzbid0XHJcbiAgICAgIC8vIHNob3duIGR1ZSB0aGUgZmFjdCB0aGF0IGhpZGRlbiBpbnB1dCBnZXRzIGZvY3VzZWRcclxuICAgICAgaWYgKCAhKF90aGlzLm9wdGlvbnMubmF0aXZlT25Nb2JpbGUgJiYgX3RoaXMudXRpbHMuaXNNb2JpbGUoKSkgKSB7XHJcbiAgICAgICAgX3RoaXMuJGVsZW1lbnQub24oJ2ZvY3VzJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIF90aGlzLmVsZW1lbnRzLmlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLmlucHV0XHJcbiAgICAgICAgICAucHJvcCh7IHRhYmluZGV4OiBfdGhpcy5vcmlnaW5hbFRhYmluZGV4LCBkaXNhYmxlZDogZmFsc2UgfSlcclxuICAgICAgICAgIC5vbigna2V5ZG93bicgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgJC5wcm94eShfdGhpcy5oYW5kbGVLZXlzLCBfdGhpcykpXHJcbiAgICAgICAgICAub24oJ2ZvY3VzaW4nICsgZXZlbnROYW1lc3BhY2VTdWZmaXgsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLmFkZENsYXNzKF90aGlzLmNsYXNzZXMuZm9jdXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgZmxpY2tlciB3aGVuIGZvY3VzaW5nIG91dCBhbmQgYmFjayBhZ2FpbiBpbiB0aGUgYnJvd3NlciB3aW5kb3dcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXQub25lKCdibHVyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXQuYmx1cigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICggX3RoaXMub3B0aW9ucy5vcGVuT25Gb2N1cyAmJiAhX3RoaXMuc3RhdGUub3BlbmVkICkge1xyXG4gICAgICAgICAgICAgIF90aGlzLm9wZW4oZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oJ2ZvY3Vzb3V0JyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLnJlbW92ZUNsYXNzKF90aGlzLmNsYXNzZXMuZm9jdXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignaW5wdXQgcHJvcGVydHljaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IF90aGlzLmVsZW1lbnRzLmlucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICB2YXIgc2VhcmNoUmVnRXhwID0gbmV3IFJlZ0V4cCgnXicgKyBfdGhpcy51dGlscy5lc2NhcGVSZWdFeHAodmFsKSwgJ2knKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENsZWFyIHNlYXJjaFxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMucmVzZXRTdHIpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZXNldFN0ciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXQudmFsKCcnKTtcclxuICAgICAgICAgICAgfSwgX3RoaXMub3B0aW9ucy5rZXlTZWFyY2hUaW1lb3V0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICggdmFsLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAvLyBTZWFyY2ggaW4gc2VsZWN0IG9wdGlvbnNcclxuICAgICAgICAgICAgICAkLmVhY2goX3RoaXMuaXRlbXMsIGZ1bmN0aW9uKGksIGVsbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsbS5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoUmVnRXhwLnRlc3QoZWxtLnRleHQpIHx8IHNlYXJjaFJlZ0V4cC50ZXN0KGVsbS5zbHVnKSkge1xyXG4gICAgICAgICAgICAgICAgICBfdGhpcy5oaWdobGlnaHQoaSk7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZWxtLmFsdCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgYWx0SXRlbXMgPSBlbG0uYWx0LnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhaSA9IDA7IGFpIDwgYWx0SXRlbXMubGVuZ3RoOyBhaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghYWx0SXRlbXNbYWldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaFJlZ0V4cC50ZXN0KGFsdEl0ZW1zW2FpXS50cmltKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGlnaGxpZ2h0KGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgX3RoaXMuJGxpLm9uKHtcclxuICAgICAgICAvLyBQcmV2ZW50IDxpbnB1dD4gYmx1ciBvbiBDaHJvbWVcclxuICAgICAgICBtb3VzZWRvd246IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBfdGhpcy5zZWxlY3QoJCh0aGlzKS5kYXRhKCdpbmRleCcpKTtcclxuXHJcbiAgICAgICAgICAvLyBDaHJvbWUgZG9lc24ndCBjbG9zZSBvcHRpb25zIGJveCBpZiBzZWxlY3QgaXMgd3JhcHBlZCB3aXRoIGEgbGFiZWxcclxuICAgICAgICAgIC8vIFdlIG5lZWQgdG8gJ3JldHVybiBmYWxzZScgdG8gYXZvaWQgdGhhdFxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmVoYXZpb3Igd2hlbiBrZXlib2FyZCBrZXlzIGlzIHByZXNzZWRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZSAtIEV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVLZXlzOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIHZhciBrZXkgPSBlLndoaWNoO1xyXG4gICAgICB2YXIga2V5cyA9IF90aGlzLm9wdGlvbnMua2V5cztcclxuXHJcbiAgICAgIHZhciBpc1ByZXZLZXkgPSAkLmluQXJyYXkoa2V5LCBrZXlzLnByZXZpb3VzKSA+IC0xO1xyXG4gICAgICB2YXIgaXNOZXh0S2V5ID0gJC5pbkFycmF5KGtleSwga2V5cy5uZXh0KSA+IC0xO1xyXG4gICAgICB2YXIgaXNTZWxlY3RLZXkgPSAkLmluQXJyYXkoa2V5LCBrZXlzLnNlbGVjdCkgPiAtMTtcclxuICAgICAgdmFyIGlzT3BlbktleSA9ICQuaW5BcnJheShrZXksIGtleXMub3BlbikgPiAtMTtcclxuICAgICAgdmFyIGlkeCA9IF90aGlzLnN0YXRlLmhpZ2hsaWdodGVkSWR4O1xyXG4gICAgICB2YXIgaXNGaXJzdE9yTGFzdEl0ZW0gPSAoaXNQcmV2S2V5ICYmIGlkeCA9PT0gMCkgfHwgKGlzTmV4dEtleSAmJiAoaWR4ICsgMSkgPT09IF90aGlzLml0ZW1zLmxlbmd0aCk7XHJcbiAgICAgIHZhciBnb1RvSXRlbSA9IDA7XHJcblxyXG4gICAgICAvLyBFbnRlciAvIFNwYWNlXHJcbiAgICAgIGlmICgga2V5ID09PSAxMyB8fCBrZXkgPT09IDMyICkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgaXQncyBhIGRpcmVjdGlvbmFsIGtleVxyXG4gICAgICBpZiAoIGlzUHJldktleSB8fCBpc05leHRLZXkgKSB7XHJcbiAgICAgICAgaWYgKCAhX3RoaXMub3B0aW9ucy5hbGxvd1dyYXAgJiYgaXNGaXJzdE9yTGFzdEl0ZW0gKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIGlzUHJldktleSApIHtcclxuICAgICAgICAgIGdvVG9JdGVtID0gX3RoaXMudXRpbHMucHJldmlvdXNFbmFibGVkSXRlbShfdGhpcy5sb29rdXBJdGVtcywgaWR4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggaXNOZXh0S2V5ICkge1xyXG4gICAgICAgICAgZ29Ub0l0ZW0gPSBfdGhpcy51dGlscy5uZXh0RW5hYmxlZEl0ZW0oX3RoaXMubG9va3VwSXRlbXMsIGlkeCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfdGhpcy5oaWdobGlnaHQoZ29Ub0l0ZW0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUYWIgLyBFbnRlciAvIEVTQ1xyXG4gICAgICBpZiAoIGlzU2VsZWN0S2V5ICYmIF90aGlzLnN0YXRlLm9wZW5lZCApIHtcclxuICAgICAgICBfdGhpcy5zZWxlY3QoaWR4KTtcclxuXHJcbiAgICAgICAgaWYgKCAhX3RoaXMuc3RhdGUubXVsdGlwbGUgfHwgIV90aGlzLm9wdGlvbnMubXVsdGlwbGUua2VlcE1lbnVPcGVuICkge1xyXG4gICAgICAgICAgX3RoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU3BhY2UgLyBFbnRlciAvIExlZnQgLyBVcCAvIFJpZ2h0IC8gRG93blxyXG4gICAgICBpZiAoIGlzT3BlbktleSAmJiAhX3RoaXMuc3RhdGUub3BlbmVkICkge1xyXG4gICAgICAgIF90aGlzLm9wZW4oKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKiogVXBkYXRlIHRoZSBpdGVtcyBvYmplY3QgKi9cclxuICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgX3RoaXMucG9wdWxhdGUoKTtcclxuICAgICAgX3RoaXMuYWN0aXZhdGUoKTtcclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdSZWZyZXNoJywgX3RoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKiogU2V0IG9wdGlvbnMgYm94IHdpZHRoL2hlaWdodCAqL1xyXG4gICAgc2V0T3B0aW9uc0RpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIG9wdGlvbnMgYm94IGhlaWdodFxyXG4gICAgICAvLyBTZXQgYSB0ZW1wb3JhcnkgY2xhc3Mgb24gdGhlIGhpZGRlbiBwYXJlbnQgb2YgdGhlIGVsZW1lbnRcclxuICAgICAgdmFyIGhpZGRlbkNoaWxkcmVuID0gX3RoaXMuZWxlbWVudHMuaXRlbXMuY2xvc2VzdCgnOnZpc2libGUnKS5jaGlsZHJlbignOmhpZGRlbicpLmFkZENsYXNzKF90aGlzLmNsYXNzZXMudGVtcHNob3cpO1xyXG4gICAgICB2YXIgbWF4SGVpZ2h0ID0gX3RoaXMub3B0aW9ucy5tYXhIZWlnaHQ7XHJcbiAgICAgIHZhciBpdGVtc1dpZHRoID0gX3RoaXMuZWxlbWVudHMuaXRlbXMub3V0ZXJXaWR0aCgpO1xyXG4gICAgICB2YXIgd3JhcHBlcldpZHRoID0gX3RoaXMuZWxlbWVudHMud3JhcHBlci5vdXRlcldpZHRoKCkgLSAoaXRlbXNXaWR0aCAtIF90aGlzLmVsZW1lbnRzLml0ZW1zLndpZHRoKCkpO1xyXG5cclxuICAgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zLCBtaW5pbXVtIGlzIHdyYXBwZXIgd2lkdGgsIGV4cGFuZCBmb3IgbG9uZyBpdGVtcyBpZiBvcHRpb24gaXMgdHJ1ZVxyXG4gICAgICBpZiAoICFfdGhpcy5vcHRpb25zLmV4cGFuZFRvSXRlbVRleHQgfHwgd3JhcHBlcldpZHRoID4gaXRlbXNXaWR0aCApIHtcclxuICAgICAgICBfdGhpcy5maW5hbFdpZHRoID0gd3JhcHBlcldpZHRoO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGlzIGluY2x1ZGVkXHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMuaXRlbXMuY3NzKCdvdmVyZmxvdycsICdzY3JvbGwnKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IGEgcmVhbGx5IGxvbmcgd2lkdGggZm9yIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlclxyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci53aWR0aCg5ZTQpO1xyXG4gICAgICAgIF90aGlzLmZpbmFsV2lkdGggPSBfdGhpcy5lbGVtZW50cy5pdGVtcy53aWR0aCgpO1xyXG4gICAgICAgIC8vIFNldCBzY3JvbGwgYmFyIHRvIGF1dG9cclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5pdGVtcy5jc3MoJ292ZXJmbG93JywgJycpO1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci53aWR0aCgnJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzLml0ZW1zLndpZHRoKF90aGlzLmZpbmFsV2lkdGgpLmhlaWdodCgpID4gbWF4SGVpZ2h0ICYmIF90aGlzLmVsZW1lbnRzLml0ZW1zLmhlaWdodChtYXhIZWlnaHQpO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIHRoZSB0ZW1wb3JhcnkgY2xhc3NcclxuICAgICAgaGlkZGVuQ2hpbGRyZW4ucmVtb3ZlQ2xhc3MoX3RoaXMuY2xhc3Nlcy50ZW1wc2hvdyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBEZXRlY3QgaWYgdGhlIG9wdGlvbnMgYm94IGlzIGluc2lkZSB0aGUgd2luZG93ICovXHJcbiAgICBpc0luVmlld3BvcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZm9yY2VSZW5kZXJBYm92ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci5hZGRDbGFzcyhfdGhpcy5jbGFzc2VzLmFib3ZlKTtcclxuICAgICAgfSBlbHNlIGlmIChfdGhpcy5vcHRpb25zLmZvcmNlUmVuZGVyQmVsb3cgPT09IHRydWUpIHtcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIuYWRkQ2xhc3MoX3RoaXMuY2xhc3Nlcy5iZWxvdyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICR3aW4uc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgdmFyIHdpbkhlaWdodCA9ICR3aW4uaGVpZ2h0KCk7XHJcbiAgICAgICAgdmFyIHVpUG9zWCA9IF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgdmFyIHVpSGVpZ2h0ID0gX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLm91dGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIHZhciBmaXRzRG93biA9ICh1aVBvc1ggKyB1aUhlaWdodCArIF90aGlzLml0ZW1zSGVpZ2h0KSA8PSAoc2Nyb2xsVG9wICsgd2luSGVpZ2h0KTtcclxuICAgICAgICB2YXIgZml0c0Fib3ZlID0gKHVpUG9zWCAtIF90aGlzLml0ZW1zSGVpZ2h0KSA+IHNjcm9sbFRvcDtcclxuXHJcbiAgICAgICAgLy8gSWYgaXQgZG9lcyBub3QgZml0IGJlbG93LCBvbmx5IHJlbmRlciBpdFxyXG4gICAgICAgIC8vIGFib3ZlIGl0IGZpdCdzIHRoZXJlLlxyXG4gICAgICAgIC8vIEl0J3MgYWNjZXB0YWJsZSB0aGF0IHRoZSB1c2VyIG5lZWRzIHRvXHJcbiAgICAgICAgLy8gc2Nyb2xsIHRoZSB2aWV3cG9ydCB0byBzZWUgdGhlIGN1dCBvZmYgVUlcclxuICAgICAgICB2YXIgcmVuZGVyQWJvdmUgPSAhZml0c0Rvd24gJiYgZml0c0Fib3ZlO1xyXG4gICAgICAgIHZhciByZW5kZXJCZWxvdyA9ICFyZW5kZXJBYm92ZTtcclxuXHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLnRvZ2dsZUNsYXNzKF90aGlzLmNsYXNzZXMuYWJvdmUsIHJlbmRlckFib3ZlKTtcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIudG9nZ2xlQ2xhc3MoX3RoaXMuY2xhc3Nlcy5iZWxvdywgcmVuZGVyQmVsb3cpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZWN0IGlmIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb24gaXMgdmlzaWJsZSBhbmQgc2Nyb2xsIHRoZSBvcHRpb25zIGJveCB0byBzaG93IGl0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8QXJyYXl9IGluZGV4IC0gSW5kZXggb2YgdGhlIHNlbGVjdGVkIGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIGRldGVjdEl0ZW1WaXNpYmlsaXR5OiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgJGZpbHRlcmVkTGkgPSBfdGhpcy4kbGkuZmlsdGVyKCdbZGF0YS1pbmRleF0nKTtcclxuXHJcbiAgICAgIGlmICggX3RoaXMuc3RhdGUubXVsdGlwbGUgKSB7XHJcbiAgICAgICAgLy8gSWYgaW5kZXggaXMgYW4gYXJyYXksIHdlIGNhbiBhc3N1bWUgYSBtdWx0aXBsZSBzZWxlY3QgYW5kIHdlXHJcbiAgICAgICAgLy8gd2FudCB0byBzY3JvbGwgdG8gdGhlIHVwcGVybW9zdCBzZWxlY3RlZCBpdGVtIVxyXG4gICAgICAgIC8vIE1hdGgubWluLmFwcGx5KE1hdGgsIGluZGV4KSByZXR1cm5zIHRoZSBsb3dlc3QgZW50cnkgaW4gYW4gQXJyYXkuXHJcbiAgICAgICAgaW5kZXggPSAoJC5pc0FycmF5KGluZGV4KSAmJiBpbmRleC5sZW5ndGggPT09IDApID8gMCA6IGluZGV4O1xyXG4gICAgICAgIGluZGV4ID0gJC5pc0FycmF5KGluZGV4KSA/IE1hdGgubWluLmFwcGx5KE1hdGgsIGluZGV4KSA6IGluZGV4O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgbGlIZWlnaHQgPSAkZmlsdGVyZWRMaS5lcShpbmRleCkub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgdmFyIGxpVG9wID0gJGZpbHRlcmVkTGlbaW5kZXhdLm9mZnNldFRvcDtcclxuICAgICAgdmFyIGl0ZW1zU2Nyb2xsVG9wID0gX3RoaXMuZWxlbWVudHMuaXRlbXNTY3JvbGwuc2Nyb2xsVG9wKCk7XHJcbiAgICAgIHZhciBzY3JvbGxUID0gbGlUb3AgKyBsaUhlaWdodCAqIDI7XHJcblxyXG4gICAgICBfdGhpcy5lbGVtZW50cy5pdGVtc1Njcm9sbC5zY3JvbGxUb3AoXHJcbiAgICAgICAgc2Nyb2xsVCA+IGl0ZW1zU2Nyb2xsVG9wICsgX3RoaXMuaXRlbXNIZWlnaHQgPyBzY3JvbGxUIC0gX3RoaXMuaXRlbXNIZWlnaHQgOlxyXG4gICAgICAgICAgbGlUb3AgLSBsaUhlaWdodCA8IGl0ZW1zU2Nyb2xsVG9wID8gbGlUb3AgLSBsaUhlaWdodCA6XHJcbiAgICAgICAgICAgIGl0ZW1zU2Nyb2xsVG9wXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogT3BlbiB0aGUgc2VsZWN0IG9wdGlvbnMgYm94XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtFdmVudH0gZSAtIEV2ZW50XHJcbiAgICAgKi9cclxuICAgIG9wZW46IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIGlmICggX3RoaXMub3B0aW9ucy5uYXRpdmVPbk1vYmlsZSAmJiBfdGhpcy51dGlscy5pc01vYmlsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0JlZm9yZU9wZW4nLCBfdGhpcyk7XHJcblxyXG4gICAgICBpZiAoIGUgKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnN0b3BQcm9wYWdhdGlvbikge1xyXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICggX3RoaXMuc3RhdGUuZW5hYmxlZCApIHtcclxuICAgICAgICBfdGhpcy5zZXRPcHRpb25zRGltZW5zaW9ucygpO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFueSBvdGhlciBvcGVuZWQgaW5zdGFuY2VzIG9mIHNlbGVjdCBhbmQgY2xvc2UgaXRcclxuICAgICAgICAkKCcuJyArIF90aGlzLmNsYXNzZXMuaGlkZXNlbGVjdCwgJy4nICsgX3RoaXMuY2xhc3Nlcy5vcGVuKS5jaGlsZHJlbigpW3BsdWdpbk5hbWVdKCdjbG9zZScpO1xyXG5cclxuICAgICAgICBfdGhpcy5zdGF0ZS5vcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgIF90aGlzLml0ZW1zSGVpZ2h0ID0gX3RoaXMuZWxlbWVudHMuaXRlbXMub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICBfdGhpcy5pdGVtc0lubmVySGVpZ2h0ID0gX3RoaXMuZWxlbWVudHMuaXRlbXMuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIC8vIFRvZ2dsZSBvcHRpb25zIGJveCB2aXNpYmlsaXR5XHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLmFkZENsYXNzKF90aGlzLmNsYXNzZXMub3Blbik7XHJcblxyXG4gICAgICAgIC8vIEdpdmUgZHVtbXkgaW5wdXQgZm9jdXNcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5pbnB1dC52YWwoJycpO1xyXG4gICAgICAgIGlmICggZSAmJiBlLnR5cGUgIT09ICdmb2N1c2luJyApIHtcclxuICAgICAgICAgIF90aGlzLmVsZW1lbnRzLmlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZWxheWVkIGJpbmRzIGV2ZW50cyBvbiBEb2N1bWVudCB0byBtYWtlIGxhYmVsIGNsaWNrcyB3b3JrXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRkb2NcclxuICAgICAgICAgICAgLm9uKCdjbGljaycgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgJC5wcm94eShfdGhpcy5jbG9zZSwgX3RoaXMpKVxyXG4gICAgICAgICAgICAub24oJ3Njcm9sbCcgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgJC5wcm94eShfdGhpcy5pc0luVmlld3BvcnQsIF90aGlzKSk7XHJcbiAgICAgICAgfSwgMSk7XHJcblxyXG4gICAgICAgIF90aGlzLmlzSW5WaWV3cG9ydCgpO1xyXG5cclxuICAgICAgICAvLyBQcmV2ZW50IHdpbmRvdyBzY3JvbGwgd2hlbiB1c2luZyBtb3VzZSB3aGVlbCBpbnNpZGUgaXRlbXMgYm94XHJcbiAgICAgICAgaWYgKCBfdGhpcy5vcHRpb25zLnByZXZlbnRXaW5kb3dTY3JvbGwgKSB7XHJcbiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgICAgICAgJGRvYy5vbignbW91c2V3aGVlbCcgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCArICcgRE9NTW91c2VTY3JvbGwnICsgZXZlbnROYW1lc3BhY2VTdWZmaXgsICcuJyArIF90aGlzLmNsYXNzZXMuc2Nyb2xsLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmdFdmVudCA9IGUub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YVkgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKCAnZGV0YWlsJyAgICAgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC5kZXRhaWwgKiAtMTsgfVxyXG4gICAgICAgICAgICBpZiAoICd3aGVlbERlbHRhJyAgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LndoZWVsRGVsdGE7ICB9XHJcbiAgICAgICAgICAgIGlmICggJ3doZWVsRGVsdGFZJyBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQud2hlZWxEZWx0YVk7IH1cclxuICAgICAgICAgICAgaWYgKCAnZGVsdGFZJyAgICAgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC5kZWx0YVkgKiAtMTsgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCBzY3JvbGxUb3AgPT09ICh0aGlzLnNjcm9sbEhlaWdodCAtIF90aGlzLml0ZW1zSW5uZXJIZWlnaHQpICYmIGRlbHRhWSA8IDAgfHwgc2Nyb2xsVG9wID09PSAwICYmIGRlbHRhWSA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90aGlzLmRldGVjdEl0ZW1WaXNpYmlsaXR5KF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4KTtcclxuXHJcbiAgICAgICAgX3RoaXMuaGlnaGxpZ2h0KF90aGlzLnN0YXRlLm11bHRpcGxlID8gLTEgOiBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCk7XHJcblxyXG4gICAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnT3BlbicsIF90aGlzKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKiogQ2xvc2UgdGhlIHNlbGVjdCBvcHRpb25zIGJveCAqL1xyXG4gICAgY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdCZWZvcmVDbG9zZScsIF90aGlzKTtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSBjdXN0b20gZXZlbnRzIG9uIGRvY3VtZW50XHJcbiAgICAgICRkb2Mub2ZmKGV2ZW50TmFtZXNwYWNlU3VmZml4KTtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSB2aXNpYmxlIGNsYXNzIHRvIGhpZGUgb3B0aW9ucyBib3hcclxuICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLnJlbW92ZUNsYXNzKF90aGlzLmNsYXNzZXMub3Blbik7XHJcblxyXG4gICAgICBfdGhpcy5zdGF0ZS5vcGVuZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQ2xvc2UnLCBfdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBTZWxlY3QgY3VycmVudCBvcHRpb24gYW5kIGNoYW5nZSB0aGUgbGFiZWwgKi9cclxuICAgIGNoYW5nZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0JlZm9yZUNoYW5nZScsIF90aGlzKTtcclxuXHJcbiAgICAgIGlmICggX3RoaXMuc3RhdGUubXVsdGlwbGUgKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgb2xkIHNlbGVjdGVkXHJcbiAgICAgICAgJC5lYWNoKF90aGlzLmxvb2t1cEl0ZW1zLCBmdW5jdGlvbihpZHgpIHtcclxuICAgICAgICAgIF90aGlzLmxvb2t1cEl0ZW1zW2lkeF0uc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgIF90aGlzLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLnByb3AoJ3NlbGVjdGVkJywgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTZXQgbmV3IHNlbGVjdGVkXHJcbiAgICAgICAgJC5lYWNoKF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4LCBmdW5jdGlvbihpZHgsIHZhbHVlKSB7XHJcbiAgICAgICAgICBfdGhpcy5sb29rdXBJdGVtc1t2YWx1ZV0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgX3RoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJykuZXEodmFsdWUpLnByb3AoJ3NlbGVjdGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIF90aGlzLnN0YXRlLmN1cnJWYWx1ZSA9IF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4O1xyXG5cclxuICAgICAgICBfdGhpcy5zZXRMYWJlbCgpO1xyXG5cclxuICAgICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0NoYW5nZScsIF90aGlzKTtcclxuICAgICAgfSBlbHNlIGlmICggX3RoaXMuc3RhdGUuY3VyclZhbHVlICE9PSBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCApIHtcclxuICAgICAgICAvLyBBcHBseSBjaGFuZ2VkIHZhbHVlIHRvIG9yaWdpbmFsIHNlbGVjdFxyXG4gICAgICAgIF90aGlzLiRlbGVtZW50XHJcbiAgICAgICAgICAucHJvcCgnc2VsZWN0ZWRJbmRleCcsIF90aGlzLnN0YXRlLmN1cnJWYWx1ZSA9IF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4KVxyXG4gICAgICAgICAgLmRhdGEoJ3ZhbHVlJywgX3RoaXMubG9va3VwSXRlbXNbX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHhdLnRleHQpO1xyXG5cclxuICAgICAgICAvLyBDaGFuZ2UgbGFiZWwgdGV4dFxyXG4gICAgICAgIF90aGlzLnNldExhYmVsKCk7XHJcblxyXG4gICAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQ2hhbmdlJywgX3RoaXMpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlnaGxpZ2h0IG9wdGlvblxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gSW5kZXggb2YgdGhlIG9wdGlvbnMgdGhhdCB3aWxsIGJlIGhpZ2hsaWdodGVkXHJcbiAgICAgKi9cclxuICAgIGhpZ2hsaWdodDogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyICRmaWx0ZXJlZExpID0gX3RoaXMuJGxpLmZpbHRlcignW2RhdGEtaW5kZXhdJykucmVtb3ZlQ2xhc3MoJ2hpZ2hsaWdodGVkJyk7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0JlZm9yZUhpZ2hsaWdodCcsIF90aGlzKTtcclxuXHJcbiAgICAgIC8vIFBhcmFtZXRlciBpbmRleCBpcyByZXF1aXJlZCBhbmQgc2hvdWxkIG5vdCBiZSBhIGRpc2FibGVkIGl0ZW1cclxuICAgICAgaWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkIHx8IGluZGV4ID09PSAtMSB8fCBfdGhpcy5sb29rdXBJdGVtc1tpbmRleF0uZGlzYWJsZWQgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkZmlsdGVyZWRMaVxyXG4gICAgICAgIC5lcShfdGhpcy5zdGF0ZS5oaWdobGlnaHRlZElkeCA9IGluZGV4KVxyXG4gICAgICAgIC5hZGRDbGFzcygnaGlnaGxpZ2h0ZWQnKTtcclxuXHJcbiAgICAgIF90aGlzLmRldGVjdEl0ZW1WaXNpYmlsaXR5KGluZGV4KTtcclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnSGlnaGxpZ2h0JywgX3RoaXMpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbGVjdCBvcHRpb25cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBJbmRleCBvZiB0aGUgb3B0aW9uIHRoYXQgd2lsbCBiZSBzZWxlY3RlZFxyXG4gICAgICovXHJcbiAgICBzZWxlY3Q6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIHZhciAkZmlsdGVyZWRMaSA9IF90aGlzLiRsaS5maWx0ZXIoJ1tkYXRhLWluZGV4XScpO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdCZWZvcmVTZWxlY3QnLCBfdGhpcywgaW5kZXgpO1xyXG5cclxuICAgICAgLy8gUGFyYW1ldGVyIGluZGV4IGlzIHJlcXVpcmVkIGFuZCBzaG91bGQgbm90IGJlIGEgZGlzYWJsZWQgaXRlbVxyXG4gICAgICBpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgfHwgaW5kZXggPT09IC0xIHx8IF90aGlzLmxvb2t1cEl0ZW1zW2luZGV4XS5kaXNhYmxlZCApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICggX3RoaXMuc3RhdGUubXVsdGlwbGUgKSB7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHNlbGVjdGVkSWR4IGlzIGFuIGFycmF5XHJcbiAgICAgICAgX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHggPSAkLmlzQXJyYXkoX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHgpID8gX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHggOiBbX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHhdO1xyXG5cclxuICAgICAgICB2YXIgaGFzU2VsZWN0ZWRJbmRleCA9ICQuaW5BcnJheShpbmRleCwgX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHgpO1xyXG4gICAgICAgIGlmICggaGFzU2VsZWN0ZWRJbmRleCAhPT0gLTEgKSB7XHJcbiAgICAgICAgICBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeC5zcGxpY2UoaGFzU2VsZWN0ZWRJbmRleCwgMSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4LnB1c2goaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGZpbHRlcmVkTGlcclxuICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKVxyXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5pbkFycmF5KGluZGV4LCBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCkgIT09IC0xO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkZmlsdGVyZWRMaVxyXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgICAuZXEoX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHggPSBpbmRleClcclxuICAgICAgICAgIC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCAhX3RoaXMuc3RhdGUubXVsdGlwbGUgfHwgIV90aGlzLm9wdGlvbnMubXVsdGlwbGUua2VlcE1lbnVPcGVuICkge1xyXG4gICAgICAgIF90aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF90aGlzLmNoYW5nZSgpO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdTZWxlY3QnLCBfdGhpcywgaW5kZXgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuYmluZCBhbmQgcmVtb3ZlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBwcmVzZXJ2ZURhdGEgLSBDaGVjayBpZiB0aGUgZGF0YSBvbiB0aGUgZWxlbWVudCBzaG91bGQgYmUgcmVtb3ZlZCB0b29cclxuICAgICAqL1xyXG4gICAgZGVzdHJveTogZnVuY3Rpb24ocHJlc2VydmVEYXRhKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBpZiAoIF90aGlzLnN0YXRlICYmIF90aGlzLnN0YXRlLmVuYWJsZWQgKSB7XHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMuaXRlbXMuYWRkKF90aGlzLmVsZW1lbnRzLndyYXBwZXIpLmFkZChfdGhpcy5lbGVtZW50cy5pbnB1dCkucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIGlmICggIXByZXNlcnZlRGF0YSApIHtcclxuICAgICAgICAgIF90aGlzLiRlbGVtZW50LnJlbW92ZURhdGEocGx1Z2luTmFtZSkucmVtb3ZlRGF0YSgndmFsdWUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90aGlzLiRlbGVtZW50LnByb3AoJ3RhYmluZGV4JywgX3RoaXMub3JpZ2luYWxUYWJpbmRleCkub2ZmKGV2ZW50TmFtZXNwYWNlU3VmZml4KS5vZmYoX3RoaXMuZXZlbnRUcmlnZ2VycykudW53cmFwKCkudW53cmFwKCk7XHJcblxyXG4gICAgICAgIF90aGlzLnN0YXRlLmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEEgcmVhbGx5IGxpZ2h0d2VpZ2h0IHBsdWdpbiB3cmFwcGVyIGFyb3VuZCB0aGUgY29uc3RydWN0b3IsXHJcbiAgLy8gcHJldmVudGluZyBhZ2FpbnN0IG11bHRpcGxlIGluc3RhbnRpYXRpb25zXHJcbiAgJC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uKGFyZ3MpIHtcclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBkYXRhID0gJC5kYXRhKHRoaXMsIHBsdWdpbk5hbWUpO1xyXG5cclxuICAgICAgaWYgKCBkYXRhICYmICFkYXRhLmRpc2FibGVPbk1vYmlsZSApIHtcclxuICAgICAgICAodHlwZW9mIGFyZ3MgPT09ICdzdHJpbmcnICYmIGRhdGFbYXJnc10pID8gZGF0YVthcmdzXSgpIDogZGF0YS5pbml0KGFyZ3MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQuZGF0YSh0aGlzLCBwbHVnaW5OYW1lLCBuZXcgU2VsZWN0cmljKHRoaXMsIGFyZ3MpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogRGVmYXVsdCBwbHVnaW4gb3B0aW9uc1xyXG4gICAqXHJcbiAgICogQHR5cGUge29iamVjdH1cclxuICAgKi9cclxuICAkLmZuW3BsdWdpbk5hbWVdLmRlZmF1bHRzID0ge1xyXG4gICAgb25DaGFuZ2UgICAgICAgICAgICAgOiBmdW5jdGlvbihlbG0pIHsgJChlbG0pLmNoYW5nZSgpOyB9LFxyXG4gICAgbWF4SGVpZ2h0ICAgICAgICAgICAgOiAzMDAsXHJcbiAgICBrZXlTZWFyY2hUaW1lb3V0ICAgICA6IDUwMCxcclxuICAgIGFycm93QnV0dG9uTWFya3VwICAgIDogJzxiIGNsYXNzPVwiYnV0dG9uXCI+JiN4MjViZTs8L2I+JyxcclxuICAgIGRpc2FibGVPbk1vYmlsZSAgICAgIDogZmFsc2UsXHJcbiAgICBuYXRpdmVPbk1vYmlsZSAgICAgICA6IHRydWUsXHJcbiAgICBvcGVuT25Gb2N1cyAgICAgICAgICA6IHRydWUsXHJcbiAgICBvcGVuT25Ib3ZlciAgICAgICAgICA6IGZhbHNlLFxyXG4gICAgaG92ZXJJbnRlbnRUaW1lb3V0ICAgOiA1MDAsXHJcbiAgICBleHBhbmRUb0l0ZW1UZXh0ICAgICA6IGZhbHNlLFxyXG4gICAgcmVzcG9uc2l2ZSAgICAgICAgICAgOiBmYWxzZSxcclxuICAgIHByZXZlbnRXaW5kb3dTY3JvbGwgIDogdHJ1ZSxcclxuICAgIGluaGVyaXRPcmlnaW5hbFdpZHRoIDogZmFsc2UsXHJcbiAgICBhbGxvd1dyYXAgICAgICAgICAgICA6IHRydWUsXHJcbiAgICBmb3JjZVJlbmRlckFib3ZlICAgICA6IGZhbHNlLFxyXG4gICAgZm9yY2VSZW5kZXJCZWxvdyAgICAgOiBmYWxzZSxcclxuICAgIHN0b3BQcm9wYWdhdGlvbiAgICAgIDogdHJ1ZSxcclxuICAgIG9wdGlvbnNJdGVtQnVpbGRlciAgIDogJ3t0ZXh0fScsIC8vIGZ1bmN0aW9uKGl0ZW1EYXRhLCBlbGVtZW50LCBpbmRleClcclxuICAgIGxhYmVsQnVpbGRlciAgICAgICAgIDogJ3t0ZXh0fScsIC8vIGZ1bmN0aW9uKGN1cnJJdGVtKVxyXG4gICAgbGlzdEJ1aWxkZXIgICAgICAgICAgOiBmYWxzZSwgICAgLy8gZnVuY3Rpb24oaXRlbXMpXHJcbiAgICBrZXlzICAgICAgICAgICAgICAgICA6IHtcclxuICAgICAgcHJldmlvdXMgOiBbMzcsIDM4XSwgICAgICAgICAgICAgICAgIC8vIExlZnQgLyBVcFxyXG4gICAgICBuZXh0ICAgICA6IFszOSwgNDBdLCAgICAgICAgICAgICAgICAgLy8gUmlnaHQgLyBEb3duXHJcbiAgICAgIHNlbGVjdCAgIDogWzksIDEzLCAyN10sICAgICAgICAgICAgICAvLyBUYWIgLyBFbnRlciAvIEVzY2FwZVxyXG4gICAgICBvcGVuICAgICA6IFsxMywgMzIsIDM3LCAzOCwgMzksIDQwXSwgLy8gRW50ZXIgLyBTcGFjZSAvIExlZnQgLyBVcCAvIFJpZ2h0IC8gRG93blxyXG4gICAgICBjbG9zZSAgICA6IFs5LCAyN10gICAgICAgICAgICAgICAgICAgLy8gVGFiIC8gRXNjYXBlXHJcbiAgICB9LFxyXG4gICAgY3VzdG9tQ2xhc3MgICAgICAgICAgOiB7XHJcbiAgICAgIHByZWZpeDogcGx1Z2luTmFtZSxcclxuICAgICAgY2FtZWxDYXNlOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIG11bHRpcGxlICAgICAgICAgICAgICA6IHtcclxuICAgICAgc2VwYXJhdG9yOiAnLCAnLFxyXG4gICAgICBrZWVwTWVudU9wZW46IHRydWUsXHJcbiAgICAgIG1heExhYmVsRW50cmllczogZmFsc2VcclxuICAgIH1cclxuICB9O1xyXG59KSk7XHJcbiJdfQ==
